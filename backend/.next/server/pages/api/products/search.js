"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/products/search";
exports.ids = ["pages/api/products/search"];
exports.modules = {

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fproducts%2Fsearch&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cproducts%5Csearch.js&middlewareConfigBase64=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fproducts%2Fsearch&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cproducts%5Csearch.js&middlewareConfigBase64=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_products_search_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\products\\search.js */ \"(api-node)/./pages/api/products/search.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_products_search_js__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_products_search_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_products_search_js__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_products_search_js__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/products/search\",\n        pathname: \"/api/products/search\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_products_search_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGcHJvZHVjdHMlMkZzZWFyY2gmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyU1Q2FwaSU1Q3Byb2R1Y3RzJTVDc2VhcmNoLmpzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNFO0FBQzFEO0FBQzhEO0FBQzlEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQywwREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsMERBQVE7QUFDcEM7QUFDTyx3QkFBd0IseUdBQW1CO0FBQ2xEO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVELHFDIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlc1xcXFxhcGlcXFxccHJvZHVjdHNcXFxcc2VhcmNoLmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsICdkZWZhdWx0Jyk7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCAnY29uZmlnJyk7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9wcm9kdWN0cy9zZWFyY2hcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9wcm9kdWN0cy9zZWFyY2hcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiAnJyxcbiAgICAgICAgZmlsZW5hbWU6ICcnXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fproducts%2Fsearch&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cproducts%5Csearch.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/products/search.js":
/*!**************************************!*\
  !*** ./pages/api/products/search.js ***!
  \**************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _src_services_amazonService__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/services/amazonService */ \"(api-node)/./src/services/amazonService.js\");\n/* harmony import */ var _src_services_walmartService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../src/services/walmartService */ \"(api-node)/./src/services/walmartService.js\");\n/* harmony import */ var _src_services_ebayService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../src/services/ebayService */ \"(api-node)/./src/services/ebayService.js\");\n/* harmony import */ var _src_services_mockService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../src/services/mockService */ \"(api-node)/./src/services/mockService.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_services_amazonService__WEBPACK_IMPORTED_MODULE_0__, _src_services_walmartService__WEBPACK_IMPORTED_MODULE_1__, _src_services_ebayService__WEBPACK_IMPORTED_MODULE_2__]);\n([_src_services_amazonService__WEBPACK_IMPORTED_MODULE_0__, _src_services_walmartService__WEBPACK_IMPORTED_MODULE_1__, _src_services_ebayService__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n// CORS middleware\nconst allowCors = (fn)=>async (req, res)=>{\n        // Set CORS headers - support common development origins\n        const origin = req.headers.origin || '*';\n        res.setHeader('Access-Control-Allow-Credentials', true);\n        res.setHeader('Access-Control-Allow-Origin', origin);\n        // Allow requests from localhost with any port\n        if (origin !== '*' && !origin.match(/^https?:\\/\\/localhost(:\\d+)?$/)) {\n            // If not localhost, set more specific origin\n            res.setHeader('Access-Control-Allow-Origin', 'http://localhost:5173');\n        }\n        res.setHeader('Access-Control-Allow-Methods', 'GET,OPTIONS,POST');\n        res.setHeader('Access-Control-Allow-Headers', 'X-CSRF-Token, X-Requested-With, Accept, Accept-Version, Content-Length, Content-MD5, Content-Type, Date, X-Api-Version, Origin');\n        // Handle preflight request\n        if (req.method === 'OPTIONS') {\n            res.status(200).end();\n            return;\n        }\n        // Call the original handler\n        return await fn(req, res);\n    };\n// Map the source names from services to the frontend's expected source names\nconst sourceNameMap = {\n    'amazon': 'GreenEarth',\n    'walmart': 'EcoLiving',\n    'ebay': 'EcoTech',\n    'mock': 'GreenEarth' // Default mock products to GreenEarth\n};\nasync function handler(req, res) {\n    if (req.method !== 'GET') {\n        return res.status(405).json({\n            error: 'Method not allowed'\n        });\n    }\n    try {\n        const { query: query1 } = req.query;\n        console.log('Search query received:', query1);\n        if (!query1) {\n            return res.status(400).json({\n                error: 'Search query is required'\n            });\n        }\n        // Fetch products from different services in parallel\n        console.log('Fetching products from services...');\n        const amazonPromise = _src_services_amazonService__WEBPACK_IMPORTED_MODULE_0__[\"default\"].searchProducts(query1).then((products)=>{\n            console.log(`Amazon results for \"${query1}\":`, products.length);\n            return products;\n        }).catch((err)=>{\n            console.error('Amazon service error:', err.message);\n            return [];\n        });\n        const walmartPromise = _src_services_walmartService__WEBPACK_IMPORTED_MODULE_1__[\"default\"].searchProducts(query1).then((products)=>{\n            console.log(`Walmart results for \"${query1}\":`, products.length);\n            return products;\n        }).catch((err)=>{\n            console.error('Walmart service error:', err.message);\n            return [];\n        });\n        const ebayPromise = _src_services_ebayService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].searchProducts(query1).then((products)=>{\n            console.log(`eBay results for \"${query1}\":`, products.length);\n            return products;\n        }).catch((err)=>{\n            console.error('eBay service error:', err.message);\n            return [];\n        });\n        // Always add mock service for testing\n        const mockPromise = _src_services_mockService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].searchProducts(query1).then((products)=>{\n            console.log(`Mock results for \"${query1}\":`, products.length);\n            return products;\n        }).catch((err)=>{\n            console.error('Mock service error:', err.message);\n            // Return empty array instead of letting the error propagate\n            return [];\n        });\n        const [amazonProducts, walmartProducts, ebayProducts, mockProducts] = await Promise.all([\n            amazonPromise,\n            walmartPromise,\n            ebayPromise,\n            mockPromise\n        ]);\n        // Combine and format results with mapped source names\n        let allProducts = [\n            ...amazonProducts.map((p)=>({\n                    ...p,\n                    source: sourceNameMap['amazon']\n                })),\n            ...walmartProducts.map((p)=>({\n                    ...p,\n                    source: sourceNameMap['walmart']\n                })),\n            ...ebayProducts.map((p)=>({\n                    ...p,\n                    source: sourceNameMap['ebay']\n                }))\n        ];\n        // If we didn't get any real products, use mock data\n        if (allProducts.length === 0) {\n            console.log('No real products found, using mock data');\n            allProducts = mockProducts.map((p)=>({\n                    ...p,\n                    source: sourceNameMap['mock']\n                }));\n        }\n        console.log('Total products found:', allProducts.length);\n        res.status(200).json({\n            products: allProducts\n        });\n    } catch (error) {\n        console.error('Search error:', error);\n        // Even in case of error, try to return mock data\n        try {\n            // For bicycle searches, provide specific mock data\n            if (query && query.toLowerCase().includes('bicycle')) {\n                console.log('Using hardcoded bicycle data due to error');\n                return res.status(200).json({\n                    products: [\n                        {\n                            id: 'b1001',\n                            title: 'Bamboo Frame Bicycle',\n                            price: 699.99,\n                            imageUrl: 'https://m.media-amazon.com/images/I/71RDCpYR8EL._AC_SL1500_.jpg',\n                            description: 'Eco-friendly bicycle with bamboo frame, handcrafted using sustainable materials',\n                            sustainabilityLevel: 5,\n                            url: 'https://example.com/bamboo-bicycle',\n                            rating: 4.7,\n                            source: sourceNameMap['mock']\n                        },\n                        {\n                            id: 'b1002',\n                            title: 'Electric Commuter Bicycle',\n                            price: 1299.99,\n                            imageUrl: 'https://m.media-amazon.com/images/I/81CrFQZN-IL._AC_SL1500_.jpg',\n                            description: 'Energy-efficient e-bike with recycled aluminum frame and solar charging capability',\n                            sustainabilityLevel: 4,\n                            url: 'https://example.com/electric-bicycle',\n                            rating: 4.9,\n                            source: sourceNameMap['mock']\n                        }\n                    ],\n                    error: 'Used emergency fallback data due to search error'\n                });\n            }\n            const mockProducts = await _src_services_mockService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].searchProducts(query);\n            return res.status(200).json({\n                products: mockProducts.map((p)=>({\n                        ...p,\n                        source: sourceNameMap['mock']\n                    })),\n                error: 'Used fallback data due to search error'\n            });\n        } catch (mockError) {\n            console.error('Mock fallback also failed:', mockError.message);\n            // If even that fails, return a 200 with empty results instead of a 500 error\n            return res.status(200).json({\n                products: [],\n                error: 'Failed to search for products, please try a different search term'\n            });\n        }\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (allowCors(handler));\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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XFwyMDA2dFxcRG93bmxvYWRzXFxGaW5hbFRlc3RcXGJhY2tlbmRcXHBhZ2VzXFxhcGlcXHByb2R1Y3RzXFxzZWFyY2guanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGFtYXpvblNlcnZpY2UgZnJvbSAnLi4vLi4vLi4vc3JjL3NlcnZpY2VzL2FtYXpvblNlcnZpY2UnO1xyXG5pbXBvcnQgd2FsbWFydFNlcnZpY2UgZnJvbSAnLi4vLi4vLi4vc3JjL3NlcnZpY2VzL3dhbG1hcnRTZXJ2aWNlJztcclxuaW1wb3J0IGViYXlTZXJ2aWNlIGZyb20gJy4uLy4uLy4uL3NyYy9zZXJ2aWNlcy9lYmF5U2VydmljZSc7XHJcbmltcG9ydCBtb2NrU2VydmljZSBmcm9tICcuLi8uLi8uLi9zcmMvc2VydmljZXMvbW9ja1NlcnZpY2UnO1xyXG5cclxuLy8gQ09SUyBtaWRkbGV3YXJlXHJcbmNvbnN0IGFsbG93Q29ycyA9IGZuID0+IGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIC8vIFNldCBDT1JTIGhlYWRlcnMgLSBzdXBwb3J0IGNvbW1vbiBkZXZlbG9wbWVudCBvcmlnaW5zXHJcbiAgY29uc3Qgb3JpZ2luID0gcmVxLmhlYWRlcnMub3JpZ2luIHx8ICcqJztcclxuICByZXMuc2V0SGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1DcmVkZW50aWFscycsIHRydWUpO1xyXG4gIHJlcy5zZXRIZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbicsIG9yaWdpbik7XHJcbiAgLy8gQWxsb3cgcmVxdWVzdHMgZnJvbSBsb2NhbGhvc3Qgd2l0aCBhbnkgcG9ydFxyXG4gIGlmIChvcmlnaW4gIT09ICcqJyAmJiAhb3JpZ2luLm1hdGNoKC9eaHR0cHM/OlxcL1xcL2xvY2FsaG9zdCg6XFxkKyk/JC8pKSB7XHJcbiAgICAvLyBJZiBub3QgbG9jYWxob3N0LCBzZXQgbW9yZSBzcGVjaWZpYyBvcmlnaW5cclxuICAgIHJlcy5zZXRIZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbicsICdodHRwOi8vbG9jYWxob3N0OjUxNzMnKTtcclxuICB9XHJcbiAgcmVzLnNldEhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcycsICdHRVQsT1BUSU9OUyxQT1NUJyk7XHJcbiAgcmVzLnNldEhlYWRlcihcclxuICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJyxcclxuICAgICdYLUNTUkYtVG9rZW4sIFgtUmVxdWVzdGVkLVdpdGgsIEFjY2VwdCwgQWNjZXB0LVZlcnNpb24sIENvbnRlbnQtTGVuZ3RoLCBDb250ZW50LU1ENSwgQ29udGVudC1UeXBlLCBEYXRlLCBYLUFwaS1WZXJzaW9uLCBPcmlnaW4nXHJcbiAgKTtcclxuXHJcbiAgLy8gSGFuZGxlIHByZWZsaWdodCByZXF1ZXN0XHJcbiAgaWYgKHJlcS5tZXRob2QgPT09ICdPUFRJT05TJykge1xyXG4gICAgcmVzLnN0YXR1cygyMDApLmVuZCgpO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgLy8gQ2FsbCB0aGUgb3JpZ2luYWwgaGFuZGxlclxyXG4gIHJldHVybiBhd2FpdCBmbihyZXEsIHJlcyk7XHJcbn07XHJcblxyXG4vLyBNYXAgdGhlIHNvdXJjZSBuYW1lcyBmcm9tIHNlcnZpY2VzIHRvIHRoZSBmcm9udGVuZCdzIGV4cGVjdGVkIHNvdXJjZSBuYW1lc1xyXG5jb25zdCBzb3VyY2VOYW1lTWFwID0ge1xyXG4gICdhbWF6b24nOiAnR3JlZW5FYXJ0aCcsXHJcbiAgJ3dhbG1hcnQnOiAnRWNvTGl2aW5nJyxcclxuICAnZWJheSc6ICdFY29UZWNoJyxcclxuICAnbW9jayc6ICdHcmVlbkVhcnRoJyAgLy8gRGVmYXVsdCBtb2NrIHByb2R1Y3RzIHRvIEdyZWVuRWFydGhcclxufTtcclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcclxuICBpZiAocmVxLm1ldGhvZCAhPT0gJ0dFVCcpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IGVycm9yOiAnTWV0aG9kIG5vdCBhbGxvd2VkJyB9KTtcclxuICB9XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IHF1ZXJ5IH0gPSByZXEucXVlcnk7XHJcbiAgICBcclxuICAgIGNvbnNvbGUubG9nKCdTZWFyY2ggcXVlcnkgcmVjZWl2ZWQ6JywgcXVlcnkpO1xyXG4gICAgXHJcbiAgICBpZiAoIXF1ZXJ5KSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnU2VhcmNoIHF1ZXJ5IGlzIHJlcXVpcmVkJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBGZXRjaCBwcm9kdWN0cyBmcm9tIGRpZmZlcmVudCBzZXJ2aWNlcyBpbiBwYXJhbGxlbFxyXG4gICAgY29uc29sZS5sb2coJ0ZldGNoaW5nIHByb2R1Y3RzIGZyb20gc2VydmljZXMuLi4nKTtcclxuICAgIFxyXG4gICAgY29uc3QgYW1hem9uUHJvbWlzZSA9IGFtYXpvblNlcnZpY2Uuc2VhcmNoUHJvZHVjdHMocXVlcnkpXHJcbiAgICAgIC50aGVuKHByb2R1Y3RzID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhgQW1hem9uIHJlc3VsdHMgZm9yIFwiJHtxdWVyeX1cIjpgLCBwcm9kdWN0cy5sZW5ndGgpO1xyXG4gICAgICAgIHJldHVybiBwcm9kdWN0cztcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignQW1hem9uIHNlcnZpY2UgZXJyb3I6JywgZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgIHJldHVybiBbXTtcclxuICAgICAgfSk7XHJcbiAgICAgIFxyXG4gICAgY29uc3Qgd2FsbWFydFByb21pc2UgPSB3YWxtYXJ0U2VydmljZS5zZWFyY2hQcm9kdWN0cyhxdWVyeSlcclxuICAgICAgLnRoZW4ocHJvZHVjdHMgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBXYWxtYXJ0IHJlc3VsdHMgZm9yIFwiJHtxdWVyeX1cIjpgLCBwcm9kdWN0cy5sZW5ndGgpO1xyXG4gICAgICAgIHJldHVybiBwcm9kdWN0cztcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignV2FsbWFydCBzZXJ2aWNlIGVycm9yOicsIGVyci5tZXNzYWdlKTtcclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICAgIH0pO1xyXG4gICAgICBcclxuICAgIGNvbnN0IGViYXlQcm9taXNlID0gZWJheVNlcnZpY2Uuc2VhcmNoUHJvZHVjdHMocXVlcnkpXHJcbiAgICAgIC50aGVuKHByb2R1Y3RzID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhgZUJheSByZXN1bHRzIGZvciBcIiR7cXVlcnl9XCI6YCwgcHJvZHVjdHMubGVuZ3RoKTtcclxuICAgICAgICByZXR1cm4gcHJvZHVjdHM7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ2VCYXkgc2VydmljZSBlcnJvcjonLCBlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICB9KTtcclxuICAgIFxyXG4gICAgLy8gQWx3YXlzIGFkZCBtb2NrIHNlcnZpY2UgZm9yIHRlc3RpbmdcclxuICAgIGNvbnN0IG1vY2tQcm9taXNlID0gbW9ja1NlcnZpY2Uuc2VhcmNoUHJvZHVjdHMocXVlcnkpXHJcbiAgICAgIC50aGVuKHByb2R1Y3RzID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhgTW9jayByZXN1bHRzIGZvciBcIiR7cXVlcnl9XCI6YCwgcHJvZHVjdHMubGVuZ3RoKTtcclxuICAgICAgICByZXR1cm4gcHJvZHVjdHM7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ01vY2sgc2VydmljZSBlcnJvcjonLCBlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgLy8gUmV0dXJuIGVtcHR5IGFycmF5IGluc3RlYWQgb2YgbGV0dGluZyB0aGUgZXJyb3IgcHJvcGFnYXRlXHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICB9KTtcclxuICAgIFxyXG4gICAgY29uc3QgW2FtYXpvblByb2R1Y3RzLCB3YWxtYXJ0UHJvZHVjdHMsIGViYXlQcm9kdWN0cywgbW9ja1Byb2R1Y3RzXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgICAgYW1hem9uUHJvbWlzZSwgd2FsbWFydFByb21pc2UsIGViYXlQcm9taXNlLCBtb2NrUHJvbWlzZVxyXG4gICAgXSk7XHJcblxyXG4gICAgLy8gQ29tYmluZSBhbmQgZm9ybWF0IHJlc3VsdHMgd2l0aCBtYXBwZWQgc291cmNlIG5hbWVzXHJcbiAgICBsZXQgYWxsUHJvZHVjdHMgPSBbXHJcbiAgICAgIC4uLmFtYXpvblByb2R1Y3RzLm1hcChwID0+ICh7IC4uLnAsIHNvdXJjZTogc291cmNlTmFtZU1hcFsnYW1hem9uJ10gfSkpLFxyXG4gICAgICAuLi53YWxtYXJ0UHJvZHVjdHMubWFwKHAgPT4gKHsgLi4ucCwgc291cmNlOiBzb3VyY2VOYW1lTWFwWyd3YWxtYXJ0J10gfSkpLFxyXG4gICAgICAuLi5lYmF5UHJvZHVjdHMubWFwKHAgPT4gKHsgLi4ucCwgc291cmNlOiBzb3VyY2VOYW1lTWFwWydlYmF5J10gfSkpXHJcbiAgICBdO1xyXG4gICAgXHJcbiAgICAvLyBJZiB3ZSBkaWRuJ3QgZ2V0IGFueSByZWFsIHByb2R1Y3RzLCB1c2UgbW9jayBkYXRhXHJcbiAgICBpZiAoYWxsUHJvZHVjdHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdObyByZWFsIHByb2R1Y3RzIGZvdW5kLCB1c2luZyBtb2NrIGRhdGEnKTtcclxuICAgICAgYWxsUHJvZHVjdHMgPSBtb2NrUHJvZHVjdHMubWFwKHAgPT4gKHsgLi4ucCwgc291cmNlOiBzb3VyY2VOYW1lTWFwWydtb2NrJ10gfSkpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnNvbGUubG9nKCdUb3RhbCBwcm9kdWN0cyBmb3VuZDonLCBhbGxQcm9kdWN0cy5sZW5ndGgpO1xyXG4gICAgXHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IHByb2R1Y3RzOiBhbGxQcm9kdWN0cyB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignU2VhcmNoIGVycm9yOicsIGVycm9yKTtcclxuICAgIFxyXG4gICAgLy8gRXZlbiBpbiBjYXNlIG9mIGVycm9yLCB0cnkgdG8gcmV0dXJuIG1vY2sgZGF0YVxyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gRm9yIGJpY3ljbGUgc2VhcmNoZXMsIHByb3ZpZGUgc3BlY2lmaWMgbW9jayBkYXRhXHJcbiAgICAgIGlmIChxdWVyeSAmJiBxdWVyeS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdiaWN5Y2xlJykpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnVXNpbmcgaGFyZGNvZGVkIGJpY3ljbGUgZGF0YSBkdWUgdG8gZXJyb3InKTtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBcclxuICAgICAgICAgIHByb2R1Y3RzOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBpZDogJ2IxMDAxJyxcclxuICAgICAgICAgICAgICB0aXRsZTogJ0JhbWJvbyBGcmFtZSBCaWN5Y2xlJyxcclxuICAgICAgICAgICAgICBwcmljZTogNjk5Ljk5LFxyXG4gICAgICAgICAgICAgIGltYWdlVXJsOiAnaHR0cHM6Ly9tLm1lZGlhLWFtYXpvbi5jb20vaW1hZ2VzL0kvNzFSRENwWVI4RUwuX0FDX1NMMTUwMF8uanBnJyxcclxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0Vjby1mcmllbmRseSBiaWN5Y2xlIHdpdGggYmFtYm9vIGZyYW1lLCBoYW5kY3JhZnRlZCB1c2luZyBzdXN0YWluYWJsZSBtYXRlcmlhbHMnLFxyXG4gICAgICAgICAgICAgIHN1c3RhaW5hYmlsaXR5TGV2ZWw6IDUsXHJcbiAgICAgICAgICAgICAgdXJsOiAnaHR0cHM6Ly9leGFtcGxlLmNvbS9iYW1ib28tYmljeWNsZScsXHJcbiAgICAgICAgICAgICAgcmF0aW5nOiA0LjcsXHJcbiAgICAgICAgICAgICAgc291cmNlOiBzb3VyY2VOYW1lTWFwWydtb2NrJ11cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGlkOiAnYjEwMDInLFxyXG4gICAgICAgICAgICAgIHRpdGxlOiAnRWxlY3RyaWMgQ29tbXV0ZXIgQmljeWNsZScsXHJcbiAgICAgICAgICAgICAgcHJpY2U6IDEyOTkuOTksXHJcbiAgICAgICAgICAgICAgaW1hZ2VVcmw6ICdodHRwczovL20ubWVkaWEtYW1hem9uLmNvbS9pbWFnZXMvSS84MUNyRlFaTi1JTC5fQUNfU0wxNTAwXy5qcGcnLFxyXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnRW5lcmd5LWVmZmljaWVudCBlLWJpa2Ugd2l0aCByZWN5Y2xlZCBhbHVtaW51bSBmcmFtZSBhbmQgc29sYXIgY2hhcmdpbmcgY2FwYWJpbGl0eScsXHJcbiAgICAgICAgICAgICAgc3VzdGFpbmFiaWxpdHlMZXZlbDogNCxcclxuICAgICAgICAgICAgICB1cmw6ICdodHRwczovL2V4YW1wbGUuY29tL2VsZWN0cmljLWJpY3ljbGUnLFxyXG4gICAgICAgICAgICAgIHJhdGluZzogNC45LFxyXG4gICAgICAgICAgICAgIHNvdXJjZTogc291cmNlTmFtZU1hcFsnbW9jayddXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIF0sXHJcbiAgICAgICAgICBlcnJvcjogJ1VzZWQgZW1lcmdlbmN5IGZhbGxiYWNrIGRhdGEgZHVlIHRvIHNlYXJjaCBlcnJvcidcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgY29uc3QgbW9ja1Byb2R1Y3RzID0gYXdhaXQgbW9ja1NlcnZpY2Uuc2VhcmNoUHJvZHVjdHMocXVlcnkpO1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBcclxuICAgICAgICBwcm9kdWN0czogbW9ja1Byb2R1Y3RzLm1hcChwID0+ICh7IC4uLnAsIHNvdXJjZTogc291cmNlTmFtZU1hcFsnbW9jayddIH0pKSxcclxuICAgICAgICBlcnJvcjogJ1VzZWQgZmFsbGJhY2sgZGF0YSBkdWUgdG8gc2VhcmNoIGVycm9yJ1xyXG4gICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKG1vY2tFcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdNb2NrIGZhbGxiYWNrIGFsc28gZmFpbGVkOicsIG1vY2tFcnJvci5tZXNzYWdlKTtcclxuICAgICAgLy8gSWYgZXZlbiB0aGF0IGZhaWxzLCByZXR1cm4gYSAyMDAgd2l0aCBlbXB0eSByZXN1bHRzIGluc3RlYWQgb2YgYSA1MDAgZXJyb3JcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgXHJcbiAgICAgICAgcHJvZHVjdHM6IFtdLFxyXG4gICAgICAgIGVycm9yOiAnRmFpbGVkIHRvIHNlYXJjaCBmb3IgcHJvZHVjdHMsIHBsZWFzZSB0cnkgYSBkaWZmZXJlbnQgc2VhcmNoIHRlcm0nXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgYWxsb3dDb3JzKGhhbmRsZXIpOyAiXSwibmFtZXMiOlsiYW1hem9uU2VydmljZSIsIndhbG1hcnRTZXJ2aWNlIiwiZWJheVNlcnZpY2UiLCJtb2NrU2VydmljZSIsImFsbG93Q29ycyIsImZuIiwicmVxIiwicmVzIiwib3JpZ2luIiwiaGVhZGVycyIsInNldEhlYWRlciIsIm1hdGNoIiwibWV0aG9kIiwic3RhdHVzIiwiZW5kIiwic291cmNlTmFtZU1hcCIsImhhbmRsZXIiLCJqc29uIiwiZXJyb3IiLCJxdWVyeSIsImNvbnNvbGUiLCJsb2ciLCJhbWF6b25Qcm9taXNlIiwic2VhcmNoUHJvZHVjdHMiLCJ0aGVuIiwicHJvZHVjdHMiLCJsZW5ndGgiLCJjYXRjaCIsImVyciIsIm1lc3NhZ2UiLCJ3YWxtYXJ0UHJvbWlzZSIsImViYXlQcm9taXNlIiwibW9ja1Byb21pc2UiLCJhbWF6b25Qcm9kdWN0cyIsIndhbG1hcnRQcm9kdWN0cyIsImViYXlQcm9kdWN0cyIsIm1vY2tQcm9kdWN0cyIsIlByb21pc2UiLCJhbGwiLCJhbGxQcm9kdWN0cyIsIm1hcCIsInAiLCJzb3VyY2UiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwiaWQiLCJ0aXRsZSIsInByaWNlIiwiaW1hZ2VVcmwiLCJkZXNjcmlwdGlvbiIsInN1c3RhaW5hYmlsaXR5TGV2ZWwiLCJ1cmwiLCJyYXRpbmciLCJtb2NrRXJyb3IiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/products/search.js\n");

/***/ }),

/***/ "(api-node)/./src/services/amazonService.js":
/*!***************************************!*\
  !*** ./src/services/amazonService.js ***!
  \***************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ \"axios\");\n/* harmony import */ var cheerio__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! cheerio */ \"cheerio\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([axios__WEBPACK_IMPORTED_MODULE_0__, cheerio__WEBPACK_IMPORTED_MODULE_1__]);\n([axios__WEBPACK_IMPORTED_MODULE_0__, cheerio__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n// Helper function to calculate sustainability score (simplified example)\nconst calculateSustainabilityScore = (productData)=>{\n    // This would be more complex in a real application\n    // Could check for eco-friendly labels, materials, brand reputation, etc.\n    let score = 3; // Default middle score\n    // Example logic - check for keywords in the title or description\n    const sustainabilityKeywords = [\n        'eco',\n        'sustainable',\n        'organic',\n        'recycled',\n        'green'\n    ];\n    for (const keyword of sustainabilityKeywords){\n        if (productData.title.toLowerCase().includes(keyword) || productData.description && productData.description.toLowerCase().includes(keyword)) {\n            score += 1;\n        }\n    }\n    return Math.min(5, score); // Cap at 5\n};\nconst searchProducts = async (query)=>{\n    try {\n        console.log(`Amazon service searching for: ${query}`);\n        // Add more request headers to look more like a browser\n        const response = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(`https://www.amazon.com/s?k=${encodeURIComponent(query)}`, {\n            headers: {\n                'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36',\n                'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8',\n                'Accept-Language': 'en-US,en;q=0.5',\n                'Referer': 'https://www.amazon.com/',\n                'DNT': '1',\n                'Connection': 'keep-alive',\n                'Upgrade-Insecure-Requests': '1',\n                'Cache-Control': 'max-age=0'\n            },\n            timeout: 10000\n        });\n        console.log('Amazon response status:', response.status);\n        // Check if response data exists before parsing\n        if (!response || !response.data) {\n            console.log(\"No data received from Amazon\");\n            return [];\n        }\n        const $ = cheerio__WEBPACK_IMPORTED_MODULE_1__[\"default\"].load(response.data);\n        const products = [];\n        // Try multiple selectors that Amazon might be using\n        const productSelectors = [\n            '.s-result-item[data-asin]',\n            '[data-component-type=\"s-search-result\"]',\n            '.sg-col-4-of-12.s-result-item',\n            '.s-asin'\n        ];\n        let selectorUsed = '';\n        let productsFound = 0;\n        for (const selector of productSelectors){\n            // Try each selector\n            const elements = $(selector);\n            console.log(`Amazon selector \"${selector}\" matched ${elements.length} elements`);\n            if (elements.length > 0) {\n                selectorUsed = selector;\n                productsFound = elements.length;\n                elements.each((i, el)=>{\n                    // Extract ASIN (Amazon product ID)\n                    const asin = $(el).attr('data-asin');\n                    if (!asin) return;\n                    // Try different title selectors\n                    let title = '';\n                    const titleSelectors = [\n                        'h2 span',\n                        'h2 a span',\n                        '.a-text-normal',\n                        '.a-size-base-plus'\n                    ];\n                    for (const titleSelector of titleSelectors){\n                        const titleText = $(el).find(titleSelector).first().text().trim();\n                        if (titleText) {\n                            title = titleText;\n                            break;\n                        }\n                    }\n                    // Try different price selectors\n                    let price = null;\n                    const priceSelectors = [\n                        '.a-price .a-offscreen',\n                        '.a-price',\n                        '.a-color-price'\n                    ];\n                    for (const priceSelector of priceSelectors){\n                        const priceElement = $(el).find(priceSelector).first();\n                        const priceText = priceElement.text().trim();\n                        if (priceText) {\n                            // Extract numbers from the price text\n                            const priceMatch = priceText.match(/\\d+\\.\\d+|\\d+/);\n                            if (priceMatch) {\n                                price = parseFloat(priceMatch[0]);\n                                break;\n                            }\n                        }\n                    }\n                    // Try different image selectors\n                    let imageUrl = '';\n                    const imageSelectors = [\n                        'img.s-image',\n                        '.a-section img',\n                        'img'\n                    ];\n                    for (const imageSelector of imageSelectors){\n                        const imgElement = $(el).find(imageSelector).first();\n                        const imgSrc = imgElement.attr('src');\n                        if (imgSrc && imgSrc.startsWith('http')) {\n                            imageUrl = imgSrc;\n                            break;\n                        }\n                    }\n                    const url = 'https://www.amazon.com/dp/' + asin;\n                    if (title && price) {\n                        const productData = {\n                            id: asin,\n                            title,\n                            price,\n                            imageUrl,\n                            url\n                        };\n                        products.push({\n                            ...productData,\n                            sustainabilityLevel: calculateSustainabilityScore(productData)\n                        });\n                    }\n                });\n                // Break if we found products with this selector\n                if (products.length > 0) {\n                    break;\n                }\n            }\n        }\n        console.log(`Amazon search results: ${products.length} products found using selector: ${selectorUsed} (${productsFound} matches)`);\n        return products;\n    } catch (error) {\n        console.error('Error searching Amazon products:', error.message);\n        if (error.response) {\n            console.error('Amazon response status:', error.response.status);\n            console.error('Amazon response headers:', JSON.stringify(error.response.headers));\n        }\n        return [];\n    }\n};\nconst getProductDetails = async (productId)=>{\n    try {\n        const response = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(`https://www.amazon.com/dp/${productId}`, {\n            headers: {\n                'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36',\n                'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8',\n                'Accept-Language': 'en-US,en;q=0.5',\n                'Referer': 'https://www.amazon.com/',\n                'DNT': '1',\n                'Connection': 'keep-alive',\n                'Upgrade-Insecure-Requests': '1'\n            },\n            timeout: 10000\n        });\n        // Check if response data exists before parsing\n        if (!response || !response.data) {\n            console.log(\"No data received from Amazon product details\");\n            throw new Error(\"Failed to load product data from Amazon\");\n        }\n        const $ = cheerio__WEBPACK_IMPORTED_MODULE_1__[\"default\"].load(response.data);\n        const title = $('#productTitle').text().trim();\n        const priceText = $('.a-price .a-offscreen').first().text().trim();\n        const price = priceText ? parseFloat(priceText.replace(/[^0-9.]/g, '')) : null;\n        // Get multiple images\n        const images = [];\n        $('#altImages img').each((i, el)=>{\n            const src = $(el).attr('src');\n            if (src && !src.includes('sprite')) {\n                // Convert thumbnail URL to full-size image URL\n                const fullSizeUrl = src.replace(/_[S]C_\\.\\w+$/, '');\n                images.push(fullSizeUrl);\n            }\n        });\n        // Extract description\n        const description = $('#productDescription p').text().trim();\n        // Extract specifications\n        const specs = {};\n        $('#productDetails_techSpec_section_1 tr').each((i, el)=>{\n            const key = $(el).find('th').text().trim();\n            const value = $(el).find('td').text().trim();\n            if (key && value) {\n                specs[key] = value;\n            }\n        });\n        const productData = {\n            id: productId,\n            title,\n            price,\n            images: images.length > 0 ? images : [\n                $('#landingImage').attr('src')\n            ],\n            description,\n            specs,\n            url: `https://www.amazon.com/dp/${productId}`\n        };\n        return {\n            ...productData,\n            sustainabilityLevel: calculateSustainabilityScore(productData)\n        };\n    } catch (error) {\n        console.error('Error getting Amazon product details:', error.message);\n        throw error;\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n    searchProducts,\n    getProductDetails\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9zZXJ2aWNlcy9hbWF6b25TZXJ2aWNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUEwQjtBQUNJO0FBRTlCLHlFQUF5RTtBQUN6RSxNQUFNRSwrQkFBK0IsQ0FBQ0M7SUFDcEMsbURBQW1EO0lBQ25ELHlFQUF5RTtJQUN6RSxJQUFJQyxRQUFRLEdBQUcsdUJBQXVCO0lBRXRDLGlFQUFpRTtJQUNqRSxNQUFNQyx5QkFBeUI7UUFBQztRQUFPO1FBQWU7UUFBVztRQUFZO0tBQVE7SUFDckYsS0FBSyxNQUFNQyxXQUFXRCx1QkFBd0I7UUFDNUMsSUFBSUYsWUFBWUksS0FBSyxDQUFDQyxXQUFXLEdBQUdDLFFBQVEsQ0FBQ0gsWUFDeENILFlBQVlPLFdBQVcsSUFBSVAsWUFBWU8sV0FBVyxDQUFDRixXQUFXLEdBQUdDLFFBQVEsQ0FBQ0gsVUFBVztZQUN4RkYsU0FBUztRQUNYO0lBQ0Y7SUFFQSxPQUFPTyxLQUFLQyxHQUFHLENBQUMsR0FBR1IsUUFBUSxXQUFXO0FBQ3hDO0FBRUEsTUFBTVMsaUJBQWlCLE9BQU9DO0lBQzVCLElBQUk7UUFDRkMsUUFBUUMsR0FBRyxDQUFDLENBQUMsOEJBQThCLEVBQUVGLE9BQU87UUFFcEQsdURBQXVEO1FBQ3ZELE1BQU1HLFdBQVcsTUFBTWpCLGlEQUFTLENBQUMsQ0FBQywyQkFBMkIsRUFBRW1CLG1CQUFtQkwsUUFBUSxFQUFFO1lBQzFGTSxTQUFTO2dCQUNQLGNBQWM7Z0JBQ2QsVUFBVTtnQkFDVixtQkFBbUI7Z0JBQ25CLFdBQVc7Z0JBQ1gsT0FBTztnQkFDUCxjQUFjO2dCQUNkLDZCQUE2QjtnQkFDN0IsaUJBQWlCO1lBQ25CO1lBQ0FDLFNBQVM7UUFDWDtRQUVBTixRQUFRQyxHQUFHLENBQUMsMkJBQTJCQyxTQUFTSyxNQUFNO1FBRXRELCtDQUErQztRQUMvQyxJQUFJLENBQUNMLFlBQVksQ0FBQ0EsU0FBU00sSUFBSSxFQUFFO1lBQy9CUixRQUFRQyxHQUFHLENBQUM7WUFDWixPQUFPLEVB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QyxXQUFXO2dCQUNsQywrQ0FBK0M7Z0JBQy9DLE1BQU1nRSxjQUFjRCxJQUFJRixPQUFPLENBQUMsZ0JBQWdCO2dCQUNoREMsT0FBT1YsSUFBSSxDQUFDWTtZQUNkO1FBQ0Y7UUFFQSxzQkFBc0I7UUFDdEIsTUFBTS9ELGNBQWNjLEVBQUUseUJBQXlCbUIsSUFBSSxHQUFHQyxJQUFJO1FBRTFELHlCQUF5QjtRQUN6QixNQUFNOEIsUUFBUSxDQUFDO1FBQ2ZsRCxFQUFFLHlDQUF5Q1MsSUFBSSxDQUFDLENBQUNDLEdBQUdDO1lBQ2xELE1BQU13QyxNQUFNbkQsRUFBRVcsSUFBSU0sSUFBSSxDQUFDLE1BQU1FLElBQUksR0FBR0MsSUFBSTtZQUN4QyxNQUFNZ0MsUUFBUXBELEVBQUVXLElBQUlNLElBQUksQ0FBQyxNQUFNRSxJQUFJLEdBQUdDLElBQUk7WUFDMUMsSUFBSStCLE9BQU9DLE9BQU87Z0JBQ2hCRixLQUFLLENBQUNDLElBQUksR0FBR0M7WUFDZjtRQUNGO1FBRUEsTUFBTXpFLGNBQWM7WUFDbEJ5RCxJQUFJUTtZQUNKN0Q7WUFDQXNDO1lBQ0EwQixRQUFRQSxPQUFPdkMsTUFBTSxHQUFHLElBQUl1QyxTQUFTO2dCQUFDL0MsRUFBRSxpQkFBaUJhLElBQUksQ0FBQzthQUFPO1lBQ3JFM0I7WUFDQWdFO1lBQ0FmLEtBQUssQ0FBQywwQkFBMEIsRUFBRVMsV0FBVztRQUMvQztRQUVBLE9BQU87WUFDTCxHQUFHakUsV0FBVztZQUNkMkQscUJBQXFCNUQsNkJBQTZCQztRQUNwRDtJQUNGLEVBQUUsT0FBTzRELE9BQU87UUFDZGhELFFBQVFnRCxLQUFLLENBQUMseUNBQXlDQSxNQUFNQyxPQUFPO1FBQ3BFLE1BQU1EO0lBQ1I7QUFDRjtBQUVBLGlFQUFlO0lBQ2JsRDtJQUNBc0Q7QUFDRixDQUFDLEVBQUMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcMjAwNnRcXERvd25sb2Fkc1xcRmluYWxUZXN0XFxiYWNrZW5kXFxzcmNcXHNlcnZpY2VzXFxhbWF6b25TZXJ2aWNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XG5pbXBvcnQgY2hlZXJpbyBmcm9tICdjaGVlcmlvJztcblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGNhbGN1bGF0ZSBzdXN0YWluYWJpbGl0eSBzY29yZSAoc2ltcGxpZmllZCBleGFtcGxlKVxuY29uc3QgY2FsY3VsYXRlU3VzdGFpbmFiaWxpdHlTY29yZSA9IChwcm9kdWN0RGF0YSkgPT4ge1xuICAvLyBUaGlzIHdvdWxkIGJlIG1vcmUgY29tcGxleCBpbiBhIHJlYWwgYXBwbGljYXRpb25cbiAgLy8gQ291bGQgY2hlY2sgZm9yIGVjby1mcmllbmRseSBsYWJlbHMsIG1hdGVyaWFscywgYnJhbmQgcmVwdXRhdGlvbiwgZXRjLlxuICBsZXQgc2NvcmUgPSAzOyAvLyBEZWZhdWx0IG1pZGRsZSBzY29yZVxuICBcbiAgLy8gRXhhbXBsZSBsb2dpYyAtIGNoZWNrIGZvciBrZXl3b3JkcyBpbiB0aGUgdGl0bGUgb3IgZGVzY3JpcHRpb25cbiAgY29uc3Qgc3VzdGFpbmFiaWxpdHlLZXl3b3JkcyA9IFsnZWNvJywgJ3N1c3RhaW5hYmxlJywgJ29yZ2FuaWMnLCAncmVjeWNsZWQnLCAnZ3JlZW4nXTtcbiAgZm9yIChjb25zdCBrZXl3b3JkIG9mIHN1c3RhaW5hYmlsaXR5S2V5d29yZHMpIHtcbiAgICBpZiAocHJvZHVjdERhdGEudGl0bGUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhrZXl3b3JkKSB8fCBcbiAgICAgICAgKHByb2R1Y3REYXRhLmRlc2NyaXB0aW9uICYmIHByb2R1Y3REYXRhLmRlc2NyaXB0aW9uLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoa2V5d29yZCkpKSB7XG4gICAgICBzY29yZSArPSAxO1xuICAgIH1cbiAgfVxuICBcbiAgcmV0dXJuIE1hdGgubWluKDUsIHNjb3JlKTsgLy8gQ2FwIGF0IDVcbn07XG5cbmNvbnN0IHNlYXJjaFByb2R1Y3RzID0gYXN5bmMgKHF1ZXJ5KSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coYEFtYXpvbiBzZXJ2aWNlIHNlYXJjaGluZyBmb3I6ICR7cXVlcnl9YCk7XG4gICAgXG4gICAgLy8gQWRkIG1vcmUgcmVxdWVzdCBoZWFkZXJzIHRvIGxvb2sgbW9yZSBsaWtlIGEgYnJvd3NlclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KGBodHRwczovL3d3dy5hbWF6b24uY29tL3M/az0ke2VuY29kZVVSSUNvbXBvbmVudChxdWVyeSl9YCwge1xuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnVXNlci1BZ2VudCc6ICdNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvOTEuMC40NDcyLjEyNCBTYWZhcmkvNTM3LjM2JyxcbiAgICAgICAgJ0FjY2VwdCc6ICd0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS93ZWJwLCovKjtxPTAuOCcsXG4gICAgICAgICdBY2NlcHQtTGFuZ3VhZ2UnOiAnZW4tVVMsZW47cT0wLjUnLFxuICAgICAgICAnUmVmZXJlcic6ICdodHRwczovL3d3dy5hbWF6b24uY29tLycsXG4gICAgICAgICdETlQnOiAnMScsXG4gICAgICAgICdDb25uZWN0aW9uJzogJ2tlZXAtYWxpdmUnLFxuICAgICAgICAnVXBncmFkZS1JbnNlY3VyZS1SZXF1ZXN0cyc6ICcxJyxcbiAgICAgICAgJ0NhY2hlLUNvbnRyb2wnOiAnbWF4LWFnZT0wJ1xuICAgICAgfSxcbiAgICAgIHRpbWVvdXQ6IDEwMDAwXG4gICAgfSk7XG4gICAgXG4gICAgY29uc29sZS5sb2coJ0FtYXpvbiByZXNwb25zZSBzdGF0dXM6JywgcmVzcG9uc2Uuc3RhdHVzKTtcbiAgICBcbiAgICAvLyBDaGVjayBpZiByZXNwb25zZSBkYXRhIGV4aXN0cyBiZWZvcmUgcGFyc2luZ1xuICAgIGlmICghcmVzcG9uc2UgfHwgIXJlc3BvbnNlLmRhdGEpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiTm8gZGF0YSByZWNlaXZlZCBmcm9tIEFtYXpvblwiKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgJCA9IGNoZWVyaW8ubG9hZChyZXNwb25zZS5kYXRhKTtcbiAgICBjb25zdCBwcm9kdWN0cyA9IFtdO1xuICAgIFxuICAgIC8vIFRyeSBtdWx0aXBsZSBzZWxlY3RvcnMgdGhhdCBBbWF6b24gbWlnaHQgYmUgdXNpbmdcbiAgICBjb25zdCBwcm9kdWN0U2VsZWN0b3JzID0gW1xuICAgICAgJy5zLXJlc3VsdC1pdGVtW2RhdGEtYXNpbl0nLFxuICAgICAgJ1tkYXRhLWNvbXBvbmVudC10eXBlPVwicy1zZWFyY2gtcmVzdWx0XCJdJyxcbiAgICAgICcuc2ctY29sLTQtb2YtMTIucy1yZXN1bHQtaXRlbScsXG4gICAgICAnLnMtYXNpbidcbiAgICBdO1xuICAgIFxuICAgIGxldCBzZWxlY3RvclVzZWQgPSAnJztcbiAgICBsZXQgcHJvZHVjdHNGb3VuZCA9IDA7XG4gICAgXG4gICAgZm9yIChjb25zdCBzZWxlY3RvciBvZiBwcm9kdWN0U2VsZWN0b3JzKSB7XG4gICAgICAvLyBUcnkgZWFjaCBzZWxlY3RvclxuICAgICAgY29uc3QgZWxlbWVudHMgPSAkKHNlbGVjdG9yKTtcbiAgICAgIGNvbnNvbGUubG9nKGBBbWF6b24gc2VsZWN0b3IgXCIke3NlbGVjdG9yfVwiIG1hdGNoZWQgJHtlbGVtZW50cy5sZW5ndGh9IGVsZW1lbnRzYCk7XG4gICAgICBcbiAgICAgIGlmIChlbGVtZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHNlbGVjdG9yVXNlZCA9IHNlbGVjdG9yO1xuICAgICAgICBwcm9kdWN0c0ZvdW5kID0gZWxlbWVudHMubGVuZ3RoO1xuICAgICAgICBcbiAgICAgICAgZWxlbWVudHMuZWFjaCgoaSwgZWwpID0+IHtcbiAgICAgICAgICAvLyBFeHRyYWN0IEFTSU4gKEFtYXpvbiBwcm9kdWN0IElEKVxuICAgICAgICAgIGNvbnN0IGFzaW4gPSAkKGVsKS5hdHRyKCdkYXRhLWFzaW4nKTtcbiAgICAgICAgICBpZiAoIWFzaW4pIHJldHVybjtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBUcnkgZGlmZmVyZW50IHRpdGxlIHNlbGVjdG9yc1xuICAgICAgICAgIGxldCB0aXRsZSA9ICcnO1xuICAgICAgICAgIGNvbnN0IHRpdGxlU2VsZWN0b3JzID0gWydoMiBzcGFuJywgJ2gyIGEgc3BhbicsICcuYS10ZXh0LW5vcm1hbCcsICcuYS1zaXplLWJhc2UtcGx1cyddO1xuICAgICAgICAgIGZvciAoY29uc3QgdGl0bGVTZWxlY3RvciBvZiB0aXRsZVNlbGVjdG9ycykge1xuICAgICAgICAgICAgY29uc3QgdGl0bGVUZXh0ID0gJChlbCkuZmluZCh0aXRsZVNlbGVjdG9yKS5maXJzdCgpLnRleHQoKS50cmltKCk7XG4gICAgICAgICAgICBpZiAodGl0bGVUZXh0KSB7XG4gICAgICAgICAgICAgIHRpdGxlID0gdGl0bGVUZXh0O1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gVHJ5IGRpZmZlcmVudCBwcmljZSBzZWxlY3RvcnNcbiAgICAgICAgICBsZXQgcHJpY2UgPSBudWxsO1xuICAgICAgICAgIGNvbnN0IHByaWNlU2VsZWN0b3JzID0gWycuYS1wcmljZSAuYS1vZmZzY3JlZW4nLCAnLmEtcHJpY2UnLCAnLmEtY29sb3ItcHJpY2UnXTtcbiAgICAgICAgICBmb3IgKGNvbnN0IHByaWNlU2VsZWN0b3Igb2YgcHJpY2VTZWxlY3RvcnMpIHtcbiAgICAgICAgICAgIGNvbnN0IHByaWNlRWxlbWVudCA9ICQoZWwpLmZpbmQocHJpY2VTZWxlY3RvcikuZmlyc3QoKTtcbiAgICAgICAgICAgIGNvbnN0IHByaWNlVGV4dCA9IHByaWNlRWxlbWVudC50ZXh0KCkudHJpbSgpO1xuICAgICAgICAgICAgaWYgKHByaWNlVGV4dCkge1xuICAgICAgICAgICAgICAvLyBFeHRyYWN0IG51bWJlcnMgZnJvbSB0aGUgcHJpY2UgdGV4dFxuICAgICAgICAgICAgICBjb25zdCBwcmljZU1hdGNoID0gcHJpY2VUZXh0Lm1hdGNoKC9cXGQrXFwuXFxkK3xcXGQrLyk7XG4gICAgICAgICAgICAgIGlmIChwcmljZU1hdGNoKSB7XG4gICAgICAgICAgICAgICAgcHJpY2UgPSBwYXJzZUZsb2F0KHByaWNlTWF0Y2hbMF0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIFRyeSBkaWZmZXJlbnQgaW1hZ2Ugc2VsZWN0b3JzXG4gICAgICAgICAgbGV0IGltYWdlVXJsID0gJyc7XG4gICAgICAgICAgY29uc3QgaW1hZ2VTZWxlY3RvcnMgPSBbJ2ltZy5zLWltYWdlJywgJy5hLXNlY3Rpb24gaW1nJywgJ2ltZyddO1xuICAgICAgICAgIGZvciAoY29uc3QgaW1hZ2VTZWxlY3RvciBvZiBpbWFnZVNlbGVjdG9ycykge1xuICAgICAgICAgICAgY29uc3QgaW1nRWxlbWVudCA9ICQoZWwpLmZpbmQoaW1hZ2VTZWxlY3RvcikuZmlyc3QoKTtcbiAgICAgICAgICAgIGNvbnN0IGltZ1NyYyA9IGltZ0VsZW1lbnQuYXR0cignc3JjJyk7XG4gICAgICAgICAgICBpZiAoaW1nU3JjICYmIGltZ1NyYy5zdGFydHNXaXRoKCdodHRwJykpIHtcbiAgICAgICAgICAgICAgaW1hZ2VVcmwgPSBpbWdTcmM7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCB1cmwgPSAnaHR0cHM6Ly93d3cuYW1hem9uLmNvbS9kcC8nICsgYXNpbjtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAodGl0bGUgJiYgcHJpY2UpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb2R1Y3REYXRhID0geyBpZDogYXNpbiwgdGl0bGUsIHByaWNlLCBpbWFnZVVybCwgdXJsIH07XG4gICAgICAgICAgICBwcm9kdWN0cy5wdXNoKHtcbiAgICAgICAgICAgICAgLi4ucHJvZHVjdERhdGEsXG4gICAgICAgICAgICAgIHN1c3RhaW5hYmlsaXR5TGV2ZWw6IGNhbGN1bGF0ZVN1c3RhaW5hYmlsaXR5U2NvcmUocHJvZHVjdERhdGEpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQnJlYWsgaWYgd2UgZm91bmQgcHJvZHVjdHMgd2l0aCB0aGlzIHNlbGVjdG9yXG4gICAgICAgIGlmIChwcm9kdWN0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coYEFtYXpvbiBzZWFyY2ggcmVzdWx0czogJHtwcm9kdWN0cy5sZW5ndGh9IHByb2R1Y3RzIGZvdW5kIHVzaW5nIHNlbGVjdG9yOiAke3NlbGVjdG9yVXNlZH0gKCR7cHJvZHVjdHNGb3VuZH0gbWF0Y2hlcylgKTtcbiAgICBcbiAgICByZXR1cm4gcHJvZHVjdHM7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3Igc2VhcmNoaW5nIEFtYXpvbiBwcm9kdWN0czonLCBlcnJvci5tZXNzYWdlKTtcbiAgICBpZiAoZXJyb3IucmVzcG9uc2UpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0FtYXpvbiByZXNwb25zZSBzdGF0dXM6JywgZXJyb3IucmVzcG9uc2Uuc3RhdHVzKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0FtYXpvbiByZXNwb25zZSBoZWFkZXJzOicsIEpTT04uc3RyaW5naWZ5KGVycm9yLnJlc3BvbnNlLmhlYWRlcnMpKTtcbiAgICB9XG4gICAgcmV0dXJuIFtdO1xuICB9XG59O1xuXG5jb25zdCBnZXRQcm9kdWN0RGV0YWlscyA9IGFzeW5jIChwcm9kdWN0SWQpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldChgaHR0cHM6Ly93d3cuYW1hem9uLmNvbS9kcC8ke3Byb2R1Y3RJZH1gLCB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdVc2VyLUFnZW50JzogJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS85MS4wLjQ0NzIuMTI0IFNhZmFyaS81MzcuMzYnLFxuICAgICAgICAnQWNjZXB0JzogJ3RleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL3dlYnAsKi8qO3E9MC44JyxcbiAgICAgICAgJ0FjY2VwdC1MYW5ndWFnZSc6ICdlbi1VUyxlbjtxPTAuNScsXG4gICAgICAgICdSZWZlcmVyJzogJ2h0dHBzOi8vd3d3LmFtYXpvbi5jb20vJyxcbiAgICAgICAgJ0ROVCc6ICcxJyxcbiAgICAgICAgJ0Nvbm5lY3Rpb24nOiAna2VlcC1hbGl2ZScsXG4gICAgICAgICdVcGdyYWRlLUluc2VjdXJlLVJlcXVlc3RzJzogJzEnXG4gICAgICB9LFxuICAgICAgdGltZW91dDogMTAwMDBcbiAgICB9KTtcbiAgICBcbiAgICAvLyBDaGVjayBpZiByZXNwb25zZSBkYXRhIGV4aXN0cyBiZWZvcmUgcGFyc2luZ1xuICAgIGlmICghcmVzcG9uc2UgfHwgIXJlc3BvbnNlLmRhdGEpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiTm8gZGF0YSByZWNlaXZlZCBmcm9tIEFtYXpvbiBwcm9kdWN0IGRldGFpbHNcIik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gbG9hZCBwcm9kdWN0IGRhdGEgZnJvbSBBbWF6b25cIik7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0ICQgPSBjaGVlcmlvLmxvYWQocmVzcG9uc2UuZGF0YSk7XG4gICAgXG4gICAgY29uc3QgdGl0bGUgPSAkKCcjcHJvZHVjdFRpdGxlJykudGV4dCgpLnRyaW0oKTtcbiAgICBjb25zdCBwcmljZVRleHQgPSAkKCcuYS1wcmljZSAuYS1vZmZzY3JlZW4nKS5maXJzdCgpLnRleHQoKS50cmltKCk7XG4gICAgY29uc3QgcHJpY2UgPSBwcmljZVRleHQgPyBwYXJzZUZsb2F0KHByaWNlVGV4dC5yZXBsYWNlKC9bXjAtOS5dL2csICcnKSkgOiBudWxsO1xuICAgIFxuICAgIC8vIEdldCBtdWx0aXBsZSBpbWFnZXNcbiAgICBjb25zdCBpbWFnZXMgPSBbXTtcbiAgICAkKCcjYWx0SW1hZ2VzIGltZycpLmVhY2goKGksIGVsKSA9PiB7XG4gICAgICBjb25zdCBzcmMgPSAkKGVsKS5hdHRyKCdzcmMnKTtcbiAgICAgIGlmIChzcmMgJiYgIXNyYy5pbmNsdWRlcygnc3ByaXRlJykpIHtcbiAgICAgICAgLy8gQ29udmVydCB0aHVtYm5haWwgVVJMIHRvIGZ1bGwtc2l6ZSBpbWFnZSBVUkxcbiAgICAgICAgY29uc3QgZnVsbFNpemVVcmwgPSBzcmMucmVwbGFjZSgvX1tTXUNfXFwuXFx3KyQvLCAnJyk7XG4gICAgICAgIGltYWdlcy5wdXNoKGZ1bGxTaXplVXJsKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICAvLyBFeHRyYWN0IGRlc2NyaXB0aW9uXG4gICAgY29uc3QgZGVzY3JpcHRpb24gPSAkKCcjcHJvZHVjdERlc2NyaXB0aW9uIHAnKS50ZXh0KCkudHJpbSgpO1xuICAgIFxuICAgIC8vIEV4dHJhY3Qgc3BlY2lmaWNhdGlvbnNcbiAgICBjb25zdCBzcGVjcyA9IHt9O1xuICAgICQoJyNwcm9kdWN0RGV0YWlsc190ZWNoU3BlY19zZWN0aW9uXzEgdHInKS5lYWNoKChpLCBlbCkgPT4ge1xuICAgICAgY29uc3Qga2V5ID0gJChlbCkuZmluZCgndGgnKS50ZXh0KCkudHJpbSgpO1xuICAgICAgY29uc3QgdmFsdWUgPSAkKGVsKS5maW5kKCd0ZCcpLnRleHQoKS50cmltKCk7XG4gICAgICBpZiAoa2V5ICYmIHZhbHVlKSB7XG4gICAgICAgIHNwZWNzW2tleV0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICBjb25zdCBwcm9kdWN0RGF0YSA9IHtcbiAgICAgIGlkOiBwcm9kdWN0SWQsXG4gICAgICB0aXRsZSxcbiAgICAgIHByaWNlLFxuICAgICAgaW1hZ2VzOiBpbWFnZXMubGVuZ3RoID4gMCA/IGltYWdlcyA6IFskKCcjbGFuZGluZ0ltYWdlJykuYXR0cignc3JjJyldLFxuICAgICAgZGVzY3JpcHRpb24sXG4gICAgICBzcGVjcyxcbiAgICAgIHVybDogYGh0dHBzOi8vd3d3LmFtYXpvbi5jb20vZHAvJHtwcm9kdWN0SWR9YFxuICAgIH07XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnByb2R1Y3REYXRhLFxuICAgICAgc3VzdGFpbmFiaWxpdHlMZXZlbDogY2FsY3VsYXRlU3VzdGFpbmFiaWxpdHlTY29yZShwcm9kdWN0RGF0YSlcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgQW1hem9uIHByb2R1Y3QgZGV0YWlsczonLCBlcnJvci5tZXNzYWdlKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQge1xuICBzZWFyY2hQcm9kdWN0cyxcbiAgZ2V0UHJvZHVjdERldGFpbHNcbn07Il0sIm5hbWVzIjpbImF4aW9zIiwiY2hlZXJpbyIsImNhbGN1bGF0ZVN1c3RhaW5hYmlsaXR5U2NvcmUiLCJwcm9kdWN0RGF0YSIsInNjb3JlIiwic3VzdGFpbmFiaWxpdHlLZXl3b3JkcyIsImtleXdvcmQiLCJ0aXRsZSIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJkZXNjcmlwdGlvbiIsIk1hdGgiLCJtaW4iLCJzZWFyY2hQcm9kdWN0cyIsInF1ZXJ5IiwiY29uc29sZSIsImxvZyIsInJlc3BvbnNlIiwiZ2V0IiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiaGVhZGVycyIsInRpbWVvdXQiLCJzdGF0dXMiLCJkYXRhIiwiJCIsImxvYWQiLCJwcm9kdWN0cyIsInByb2R1Y3RTZWxlY3RvcnMiLCJzZWxlY3RvclVzZWQiLCJwcm9kdWN0c0ZvdW5kIiwic2VsZWN0b3IiLCJlbGVtZW50cyIsImxlbmd0aCIsImVhY2giLCJpIiwiZWwiLCJhc2luIiwiYXR0ciIsInRpdGxlU2VsZWN0b3JzIiwidGl0bGVTZWxlY3RvciIsInRpdGxlVGV4dCIsImZpbmQiLCJmaXJzdCIsInRleHQiLCJ0cmltIiwicHJpY2UiLCJwcmljZVNlbGVjdG9ycyIsInByaWNlU2VsZWN0b3IiLCJwcmljZUVsZW1lbnQiLCJwcmljZVRleHQiLCJwcmljZU1hdGNoIiwibWF0Y2giLCJwYXJzZUZsb2F0IiwiaW1hZ2VVcmwiLCJpbWFnZVNlbGVjdG9ycyIsImltYWdlU2VsZWN0b3IiLCJpbWdFbGVtZW50IiwiaW1nU3JjIiwic3RhcnRzV2l0aCIsInVybCIsImlkIiwicHVzaCIsInN1c3RhaW5hYmlsaXR5TGV2ZWwiLCJlcnJvciIsIm1lc3NhZ2UiLCJKU09OIiwic3RyaW5naWZ5IiwiZ2V0UHJvZHVjdERldGFpbHMiLCJwcm9kdWN0SWQiLCJFcnJvciIsInJlcGxhY2UiLCJpbWFnZXMiLCJzcmMiLCJmdWxsU2l6ZVVybCIsInNwZWNzIiwia2V5IiwidmFsdWUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./src/services/amazonService.js\n");

/***/ }),

/***/ "(api-node)/./src/services/ebayService.js":
/*!*************************************!*\
  !*** ./src/services/ebayService.js ***!
  \*************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ \"axios\");\n/* harmony import */ var cheerio__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! cheerio */ \"cheerio\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([axios__WEBPACK_IMPORTED_MODULE_0__, cheerio__WEBPACK_IMPORTED_MODULE_1__]);\n([axios__WEBPACK_IMPORTED_MODULE_0__, cheerio__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n// Helper function to calculate sustainability score\nconst calculateSustainabilityScore = (productData)=>{\n    // This would be more complex in a real application\n    let score = 2; // Default score for eBay - has secondhand items which can be more sustainable\n    // Boost score for potentially used/secondhand goods\n    if (productData.title.toLowerCase().includes('used') || productData.title.toLowerCase().includes('pre-owned') || productData.title.toLowerCase().includes('refurbished') || productData.title.toLowerCase().includes('vintage')) {\n        score += 2;\n    }\n    // Example logic - check for additional sustainability keywords\n    const sustainabilityKeywords = [\n        'eco',\n        'sustainable',\n        'organic',\n        'recycled',\n        'green'\n    ];\n    for (const keyword of sustainabilityKeywords){\n        if (productData.title.toLowerCase().includes(keyword) || productData.description && productData.description.toLowerCase().includes(keyword)) {\n            score += 1;\n            break; // Only add 1 point max for keywords\n        }\n    }\n    return Math.min(5, score); // Cap at 5\n};\nconst searchProducts = async (query)=>{\n    try {\n        // Note: In a production environment, you would need to use official APIs instead of scraping\n        const response = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(`https://www.ebay.com/sch/i.html?_nkw=${encodeURIComponent(query)}`, {\n            headers: {\n                'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36'\n            }\n        });\n        // Check if response data exists before parsing\n        if (!response || !response.data) {\n            console.log(\"No data received from eBay\");\n            return [];\n        }\n        const $ = cheerio__WEBPACK_IMPORTED_MODULE_1__[\"default\"].load(response.data);\n        const products = [];\n        // This selector would need to be updated based on eBay's current HTML structure\n        $('.s-item__wrapper').each((i, el)=>{\n            const linkElement = $(el).find('.s-item__link');\n            if (!linkElement.length) return;\n            const url = linkElement.attr('href');\n            if (!url) return;\n            // Extract ID from URL\n            const idMatch = url.match(/\\/(\\d+)\\?/);\n            const id = idMatch ? idMatch[1] : null;\n            if (!id) return;\n            const title = $(el).find('.s-item__title').text().trim();\n            const priceText = $(el).find('.s-item__price').text().trim();\n            const price = priceText ? parseFloat(priceText.replace(/[^0-9.]/g, '')) : null;\n            const imageUrl = $(el).find('.s-item__image-img').attr('src');\n            if (title && price) {\n                const productData = {\n                    id,\n                    title,\n                    price,\n                    imageUrl,\n                    url\n                };\n                products.push({\n                    ...productData,\n                    sustainabilityLevel: calculateSustainabilityScore(productData)\n                });\n            }\n        });\n        return products;\n    } catch (error) {\n        console.error('Error searching eBay products:', error);\n        return [];\n    }\n};\nconst getProductDetails = async (productId)=>{\n    try {\n        const response = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(`https://www.ebay.com/itm/${productId}`, {\n            headers: {\n                'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36'\n            }\n        });\n        // Check if response data exists before parsing\n        if (!response || !response.data) {\n            console.log(\"No data received from eBay product details\");\n            throw new Error(\"Failed to load product data from eBay\");\n        }\n        const $ = cheerio__WEBPACK_IMPORTED_MODULE_1__[\"default\"].load(response.data);\n        const title = $('#itemTitle').clone().children().remove().end().text().trim();\n        const priceText = $('#prcIsum').text().trim();\n        const price = priceText ? parseFloat(priceText.replace(/[^0-9.]/g, '')) : null;\n        // Get images\n        const images = [];\n        $('#icImg').each((i, el)=>{\n            const src = $(el).attr('src');\n            if (src) {\n                // Convert to fullsize image URL\n                const fullSizeUrl = src.replace(/\\/s-l\\d+\\./, '/s-l1600.');\n                images.push(fullSizeUrl);\n            }\n        });\n        // Extract description\n        let description = '';\n        try {\n            // eBay often loads descriptions in iframes\n            const descriptionIframeSrc = $('#desc_ifr').attr('src');\n            if (descriptionIframeSrc) {\n                const descResponse = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(descriptionIframeSrc, {\n                    headers: {\n                        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'\n                    }\n                });\n                const $desc = cheerio__WEBPACK_IMPORTED_MODULE_1__[\"default\"].load(descResponse.data);\n                description = $desc('body').text().trim();\n            } else {\n                description = $('.item-description').text().trim();\n            }\n        } catch (e) {\n            description = '';\n        }\n        // Extract specifications/item specifics\n        const specs = {};\n        $('.item-details .ux-labels-values__labels').each((i, el)=>{\n            const key = $(el).text().trim();\n            const value = $(el).next('.ux-labels-values__values').text().trim();\n            if (key && value) {\n                specs[key] = value;\n            }\n        });\n        const condition = $('.x-item-condition-text').text().trim();\n        const productData = {\n            id: productId,\n            title,\n            price,\n            images: images.length > 0 ? images : [],\n            description,\n            specs,\n            condition,\n            url: `https://www.ebay.com/itm/${productId}`\n        };\n        return {\n            ...productData,\n            sustainabilityLevel: calculateSustainabilityScore(productData)\n        };\n    } catch (error) {\n        console.error('Error getting eBay product details:', error);\n        throw error;\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n    searchProducts,\n    getProductDetails\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ZXJ2aWNlc1xcZWJheVNlcnZpY2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcbmltcG9ydCBjaGVlcmlvIGZyb20gJ2NoZWVyaW8nO1xuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gY2FsY3VsYXRlIHN1c3RhaW5hYmlsaXR5IHNjb3JlXG5jb25zdCBjYWxjdWxhdGVTdXN0YWluYWJpbGl0eVNjb3JlID0gKHByb2R1Y3REYXRhKSA9PiB7XG4gIC8vIFRoaXMgd291bGQgYmUgbW9yZSBjb21wbGV4IGluIGEgcmVhbCBhcHBsaWNhdGlvblxuICBsZXQgc2NvcmUgPSAyOyAvLyBEZWZhdWx0IHNjb3JlIGZvciBlQmF5IC0gaGFzIHNlY29uZGhhbmQgaXRlbXMgd2hpY2ggY2FuIGJlIG1vcmUgc3VzdGFpbmFibGVcbiAgXG4gIC8vIEJvb3N0IHNjb3JlIGZvciBwb3RlbnRpYWxseSB1c2VkL3NlY29uZGhhbmQgZ29vZHNcbiAgaWYgKHByb2R1Y3REYXRhLnRpdGxlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3VzZWQnKSB8fCBcbiAgICAgIHByb2R1Y3REYXRhLnRpdGxlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3ByZS1vd25lZCcpIHx8XG4gICAgICBwcm9kdWN0RGF0YS50aXRsZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdyZWZ1cmJpc2hlZCcpIHx8XG4gICAgICBwcm9kdWN0RGF0YS50aXRsZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCd2aW50YWdlJykpIHtcbiAgICBzY29yZSArPSAyO1xuICB9XG4gIFxuICAvLyBFeGFtcGxlIGxvZ2ljIC0gY2hlY2sgZm9yIGFkZGl0aW9uYWwgc3VzdGFpbmFiaWxpdHkga2V5d29yZHNcbiAgY29uc3Qgc3VzdGFpbmFiaWxpdHlLZXl3b3JkcyA9IFsnZWNvJywgJ3N1c3RhaW5hYmxlJywgJ29yZ2FuaWMnLCAncmVjeWNsZWQnLCAnZ3JlZW4nXTtcbiAgZm9yIChjb25zdCBrZXl3b3JkIG9mIHN1c3RhaW5hYmlsaXR5S2V5d29yZHMpIHtcbiAgICBpZiAocHJvZHVjdERhdGEudGl0bGUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhrZXl3b3JkKSB8fCBcbiAgICAgICAgKHByb2R1Y3REYXRhLmRlc2NyaXB0aW9uICYmIHByb2R1Y3REYXRhLmRlc2NyaXB0aW9uLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoa2V5d29yZCkpKSB7XG4gICAgICBzY29yZSArPSAxO1xuICAgICAgYnJlYWs7IC8vIE9ubHkgYWRkIDEgcG9pbnQgbWF4IGZvciBrZXl3b3Jkc1xuICAgIH1cbiAgfVxuICBcbiAgcmV0dXJuIE1hdGgubWluKDUsIHNjb3JlKTsgLy8gQ2FwIGF0IDVcbn07XG5cbmNvbnN0IHNlYXJjaFByb2R1Y3RzID0gYXN5bmMgKHF1ZXJ5KSA9PiB7XG4gIHRyeSB7XG4gICAgLy8gTm90ZTogSW4gYSBwcm9kdWN0aW9uIGVudmlyb25tZW50LCB5b3Ugd291bGQgbmVlZCB0byB1c2Ugb2ZmaWNpYWwgQVBJcyBpbnN0ZWFkIG9mIHNjcmFwaW5nXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoYGh0dHBzOi8vd3d3LmViYXkuY29tL3NjaC9pLmh0bWw/X25rdz0ke2VuY29kZVVSSUNvbXBvbmVudChxdWVyeSl9YCwge1xuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnVXNlci1BZ2VudCc6ICdNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvOTEuMC40NDcyLjEyNCBTYWZhcmkvNTM3LjM2J1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIC8vIENoZWNrIGlmIHJlc3BvbnNlIGRhdGEgZXhpc3RzIGJlZm9yZSBwYXJzaW5nXG4gICAgaWYgKCFyZXNwb25zZSB8fCAhcmVzcG9uc2UuZGF0YSkge1xuICAgICAgY29uc29sZS5sb2coXCJObyBkYXRhIHJlY2VpdmVkIGZyb20gZUJheVwiKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgJCA9IGNoZWVyaW8ubG9hZChyZXNwb25zZS5kYXRhKTtcbiAgICBjb25zdCBwcm9kdWN0cyA9IFtdO1xuICAgIFxuICAgIC8vIFRoaXMgc2VsZWN0b3Igd291bGQgbmVlZCB0byBiZSB1cGRhdGVkIGJhc2VkIG9uIGVCYXkncyBjdXJyZW50IEhUTUwgc3RydWN0dXJlXG4gICAgJCgnLnMtaXRlbV9fd3JhcHBlcicpLmVhY2goKGksIGVsKSA9PiB7XG4gICAgICBjb25zdCBsaW5rRWxlbWVudCA9ICQoZWwpLmZpbmQoJy5zLWl0ZW1fX2xpbmsnKTtcbiAgICAgIGlmICghbGlua0VsZW1lbnQubGVuZ3RoKSByZXR1cm47XG4gICAgICBcbiAgICAgIGNvbnN0IHVybCA9IGxpbmtFbGVtZW50LmF0dHIoJ2hyZWYnKTtcbiAgICAgIGlmICghdXJsKSByZXR1cm47XG4gICAgICBcbiAgICAgIC8vIEV4dHJhY3QgSUQgZnJvbSBVUkxcbiAgICAgIGNvbnN0IGlkTWF0Y2ggPSB1cmwubWF0Y2goL1xcLyhcXGQrKVxcPy8pO1xuICAgICAgY29uc3QgaWQgPSBpZE1hdGNoID8gaWRNYXRjaFsxXSA6IG51bGw7XG4gICAgICBpZiAoIWlkKSByZXR1cm47XG4gICAgICBcbiAgICAgIGNvbnN0IHRpdGxlID0gJChlbCkuZmluZCgnLnMtaXRlbV9fdGl0bGUnKS50ZXh0KCkudHJpbSgpO1xuICAgICAgY29uc3QgcHJpY2VUZXh0ID0gJChlbCkuZmluZCgnLnMtaXRlbV9fcHJpY2UnKS50ZXh0KCkudHJpbSgpO1xuICAgICAgY29uc3QgcHJpY2UgPSBwcmljZVRleHQgPyBwYXJzZUZsb2F0KHByaWNlVGV4dC5yZXBsYWNlKC9bXjAtOS5dL2csICcnKSkgOiBudWxsO1xuICAgICAgY29uc3QgaW1hZ2VVcmwgPSAkKGVsKS5maW5kKCcucy1pdGVtX19pbWFnZS1pbWcnKS5hdHRyKCdzcmMnKTtcbiAgICAgIFxuICAgICAgaWYgKHRpdGxlICYmIHByaWNlKSB7XG4gICAgICAgIGNvbnN0IHByb2R1Y3REYXRhID0geyBpZCwgdGl0bGUsIHByaWNlLCBpbWFnZVVybCwgdXJsIH07XG4gICAgICAgIHByb2R1Y3RzLnB1c2goe1xuICAgICAgICAgIC4uLnByb2R1Y3REYXRhLFxuICAgICAgICAgIHN1c3RhaW5hYmlsaXR5TGV2ZWw6IGNhbGN1bGF0ZVN1c3RhaW5hYmlsaXR5U2NvcmUocHJvZHVjdERhdGEpXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiBwcm9kdWN0cztcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZWFyY2hpbmcgZUJheSBwcm9kdWN0czonLCBlcnJvcik7XG4gICAgcmV0dXJuIFtdO1xuICB9XG59O1xuXG5jb25zdCBnZXRQcm9kdWN0RGV0YWlscyA9IGFzeW5jIChwcm9kdWN0SWQpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldChgaHR0cHM6Ly93d3cuZWJheS5jb20vaXRtLyR7cHJvZHVjdElkfWAsIHtcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ1VzZXItQWdlbnQnOiAnTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzkxLjAuNDQ3Mi4xMjQgU2FmYXJpLzUzNy4zNidcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICAvLyBDaGVjayBpZiByZXNwb25zZSBkYXRhIGV4aXN0cyBiZWZvcmUgcGFyc2luZ1xuICAgIGlmICghcmVzcG9uc2UgfHwgIXJlc3BvbnNlLmRhdGEpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiTm8gZGF0YSByZWNlaXZlZCBmcm9tIGVCYXkgcHJvZHVjdCBkZXRhaWxzXCIpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGxvYWQgcHJvZHVjdCBkYXRhIGZyb20gZUJheVwiKTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgJCA9IGNoZWVyaW8ubG9hZChyZXNwb25zZS5kYXRhKTtcbiAgICBcbiAgICBjb25zdCB0aXRsZSA9ICQoJyNpdGVtVGl0bGUnKS5jbG9uZSgpLmNoaWxkcmVuKCkucmVtb3ZlKCkuZW5kKCkudGV4dCgpLnRyaW0oKTtcbiAgICBjb25zdCBwcmljZVRleHQgPSAkKCcjcHJjSXN1bScpLnRleHQoKS50cmltKCk7XG4gICAgY29uc3QgcHJpY2UgPSBwcmljZVRleHQgPyBwYXJzZUZsb2F0KHByaWNlVGV4dC5yZXBsYWNlKC9bXjAtOS5dL2csICcnKSkgOiBudWxsO1xuICAgIFxuICAgIC8vIEdldCBpbWFnZXNcbiAgICBjb25zdCBpbWFnZXMgPSBbXTtcbiAgICAkKCcjaWNJbWcnKS5lYWNoKChpLCBlbCkgPT4ge1xuICAgICAgY29uc3Qgc3JjID0gJChlbCkuYXR0cignc3JjJyk7XG4gICAgICBpZiAoc3JjKSB7XG4gICAgICAgIC8vIENvbnZlcnQgdG8gZnVsbHNpemUgaW1hZ2UgVVJMXG4gICAgICAgIGNvbnN0IGZ1bGxTaXplVXJsID0gc3JjLnJlcGxhY2UoL1xcL3MtbFxcZCtcXC4vLCAnL3MtbDE2MDAuJyk7XG4gICAgICAgIGltYWdlcy5wdXNoKGZ1bGxTaXplVXJsKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICAvLyBFeHRyYWN0IGRlc2NyaXB0aW9uXG4gICAgbGV0IGRlc2NyaXB0aW9uID0gJyc7XG4gICAgdHJ5IHtcbiAgICAgIC8vIGVCYXkgb2Z0ZW4gbG9hZHMgZGVzY3JpcHRpb25zIGluIGlmcmFtZXNcbiAgICAgIGNvbnN0IGRlc2NyaXB0aW9uSWZyYW1lU3JjID0gJCgnI2Rlc2NfaWZyJykuYXR0cignc3JjJyk7XG4gICAgICBpZiAoZGVzY3JpcHRpb25JZnJhbWVTcmMpIHtcbiAgICAgICAgY29uc3QgZGVzY1Jlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KGRlc2NyaXB0aW9uSWZyYW1lU3JjLCB7XG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgJ1VzZXItQWdlbnQnOiAnTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2J1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0ICRkZXNjID0gY2hlZXJpby5sb2FkKGRlc2NSZXNwb25zZS5kYXRhKTtcbiAgICAgICAgZGVzY3JpcHRpb24gPSAkZGVzYygnYm9keScpLnRleHQoKS50cmltKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZXNjcmlwdGlvbiA9ICQoJy5pdGVtLWRlc2NyaXB0aW9uJykudGV4dCgpLnRyaW0oKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBkZXNjcmlwdGlvbiA9ICcnO1xuICAgIH1cbiAgICBcbiAgICAvLyBFeHRyYWN0IHNwZWNpZmljYXRpb25zL2l0ZW0gc3BlY2lmaWNzXG4gICAgY29uc3Qgc3BlY3MgPSB7fTtcbiAgICAkKCcuaXRlbS1kZXRhaWxzIC51eC1sYWJlbHMtdmFsdWVzX19sYWJlbHMnKS5lYWNoKChpLCBlbCkgPT4ge1xuICAgICAgY29uc3Qga2V5ID0gJChlbCkudGV4dCgpLnRyaW0oKTtcbiAgICAgIGNvbnN0IHZhbHVlID0gJChlbCkubmV4dCgnLnV4LWxhYmVscy12YWx1ZXNfX3ZhbHVlcycpLnRleHQoKS50cmltKCk7XG4gICAgICBpZiAoa2V5ICYmIHZhbHVlKSB7XG4gICAgICAgIHNwZWNzW2tleV0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICBjb25zdCBjb25kaXRpb24gPSAkKCcueC1pdGVtLWNvbmRpdGlvbi10ZXh0JykudGV4dCgpLnRyaW0oKTtcbiAgICBcbiAgICBjb25zdCBwcm9kdWN0RGF0YSA9IHtcbiAgICAgIGlkOiBwcm9kdWN0SWQsXG4gICAgICB0aXRsZSxcbiAgICAgIHByaWNlLFxuICAgICAgaW1hZ2VzOiBpbWFnZXMubGVuZ3RoID4gMCA/IGltYWdlcyA6IFtdLFxuICAgICAgZGVzY3JpcHRpb24sXG4gICAgICBzcGVjcyxcbiAgICAgIGNvbmRpdGlvbixcbiAgICAgIHVybDogYGh0dHBzOi8vd3d3LmViYXkuY29tL2l0bS8ke3Byb2R1Y3RJZH1gXG4gICAgfTtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgLi4ucHJvZHVjdERhdGEsXG4gICAgICBzdXN0YWluYWJpbGl0eUxldmVsOiBjYWxjdWxhdGVTdXN0YWluYWJpbGl0eVNjb3JlKHByb2R1Y3REYXRhKVxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyBlQmF5IHByb2R1Y3QgZGV0YWlsczonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgc2VhcmNoUHJvZHVjdHMsXG4gIGdldFByb2R1Y3REZXRhaWxzXG59OyJdLCJuYW1lcyI6WyJheGlvcyIsImNoZWVyaW8iLCJjYWxjdWxhdGVTdXN0YWluYWJpbGl0eVNjb3JlIiwicHJvZHVjdERhdGEiLCJzY29yZSIsInRpdGxlIiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsInN1c3RhaW5hYmlsaXR5S2V5d29yZHMiLCJrZXl3b3JkIiwiZGVzY3JpcHRpb24iLCJNYXRoIiwibWluIiwic2VhcmNoUHJvZHVjdHMiLCJxdWVyeSIsInJlc3BvbnNlIiwiZ2V0IiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiaGVhZGVycyIsImRhdGEiLCJjb25zb2xlIiwibG9nIiwiJCIsImxvYWQiLCJwcm9kdWN0cyIsImVhY2giLCJpIiwiZWwiLCJsaW5rRWxlbWVudCIsImZpbmQiLCJsZW5ndGgiLCJ1cmwiLCJhdHRyIiwiaWRNYXRjaCIsIm1hdGNoIiwiaWQiLCJ0ZXh0IiwidHJpbSIsInByaWNlVGV4dCIsInByaWNlIiwicGFyc2VGbG9hdCIsInJlcGxhY2UiLCJpbWFnZVVybCIsInB1c2giLCJzdXN0YWluYWJpbGl0eUxldmVsIiwiZXJyb3IiLCJnZXRQcm9kdWN0RGV0YWlscyIsInByb2R1Y3RJZCIsIkVycm9yIiwiY2xvbmUiLCJjaGlsZHJlbiIsInJlbW92ZSIsImVuZCIsImltYWdlcyIsInNyYyIsImZ1bGxTaXplVXJsIiwiZGVzY3JpcHRpb25JZnJhbWVTcmMiLCJkZXNjUmVzcG9uc2UiLCIkZGVzYyIsImUiLCJzcGVjcyIsImtleSIsInZhbHVlIiwibmV4dCIsImNvbmRpdGlvbiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./src/services/ebayService.js\n");

/***/ }),

/***/ "(api-node)/./src/services/mockService.js":
/*!*************************************!*\
  !*** ./src/services/mockService.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n// This mock service provides fallback results when scraping real e-commerce sites fails\n// It's useful for testing and development\nconst mockProducts = [\n    {\n        id: '714277',\n        title: 'Gundam Model Kit - RX-78-2',\n        price: 45.99,\n        imageUrl: 'https://m.media-amazon.com/images/I/71C8dzSZBZL._AC_UL320_.jpg',\n        description: 'Classic Gundam model kit with eco-friendly packaging',\n        sustainabilityLevel: 4,\n        url: 'https://example.com/product/mock1',\n        rating: 4.5\n    },\n    {\n        id: '839044',\n        title: 'Gundam Unicorn Destroy Mode',\n        price: 68.50,\n        imageUrl: 'https://m.media-amazon.com/images/I/71lLr9mYS6L._AC_UL320_.jpg',\n        description: 'Advanced model kit with detailed parts',\n        sustainabilityLevel: 3,\n        url: 'https://example.com/product/mock2',\n        rating: 4.3\n    },\n    {\n        id: '951382',\n        title: 'Gundam Wing Zero Custom',\n        price: 52.75,\n        imageUrl: 'https://m.media-amazon.com/images/I/81nj6IlZbWL._AC_UL320_.jpg',\n        description: 'Popular Wing Gundam model with wings and weapons',\n        sustainabilityLevel: 3,\n        url: 'https://example.com/product/mock3',\n        rating: 4.7\n    },\n    {\n        id: '247653',\n        title: 'Gundam Barbatos Lupus Rex',\n        price: 64.99,\n        imageUrl: 'https://m.media-amazon.com/images/I/61P1xYA4arL._AC_UL320_.jpg',\n        description: 'Iron-Blooded Orphans series, with recycled materials',\n        sustainabilityLevel: 5,\n        url: 'https://example.com/product/mock4',\n        rating: 4.8\n    },\n    {\n        id: '365819',\n        title: 'Gundam Exia Repair',\n        price: 39.99,\n        imageUrl: 'https://m.media-amazon.com/images/I/71ghC5pvGjL._AC_UL320_.jpg',\n        description: 'Popular 00 Gundam model with GN sword',\n        sustainabilityLevel: 2,\n        url: 'https://example.com/product/mock5',\n        rating: 4.2\n    },\n    // Bicycle products\n    {\n        id: 'b1001',\n        title: 'Bamboo Frame Bicycle',\n        price: 699.99,\n        imageUrl: 'https://m.media-amazon.com/images/I/71RDCpYR8EL._AC_SL1500_.jpg',\n        description: 'Eco-friendly bicycle with bamboo frame, handcrafted using sustainable materials',\n        sustainabilityLevel: 5,\n        url: 'https://example.com/bamboo-bicycle',\n        rating: 4.7\n    },\n    {\n        id: 'b1002',\n        title: 'Electric Commuter Bicycle',\n        price: 1299.99,\n        imageUrl: 'https://m.media-amazon.com/images/I/81CrFQZN-IL._AC_SL1500_.jpg',\n        description: 'Energy-efficient e-bike with recycled aluminum frame and solar charging capability',\n        sustainabilityLevel: 4,\n        url: 'https://example.com/electric-bicycle',\n        rating: 4.9\n    },\n    {\n        id: 'b1003',\n        title: 'Recycled Tire Urban Bike',\n        price: 549.50,\n        imageUrl: 'https://m.media-amazon.com/images/I/71HqQHb-CIL._AC_SL1500_.jpg',\n        description: 'City bike featuring tires made from recycled rubber and eco-friendly components',\n        sustainabilityLevel: 5,\n        url: 'https://example.com/recycled-bicycle',\n        rating: 4.5\n    }\n];\n// Filter mock products based on search query\nconst searchProducts = async (query)=>{\n    console.log(`Mock service searching for: ${query}`);\n    // If search query is empty, return all mock products\n    if (!query) return mockProducts;\n    // Filter products based on query\n    const lowerCaseQuery = query.toLowerCase();\n    const filteredProducts = mockProducts.filter((product)=>product.title.toLowerCase().includes(lowerCaseQuery) || product.description.toLowerCase().includes(lowerCaseQuery));\n    console.log(`Mock service found ${filteredProducts.length} products for query \"${query}\"`);\n    return filteredProducts;\n};\nconst getProductDetails = async (productId)=>{\n    const product = mockProducts.find((p)=>p.id === productId);\n    if (!product) {\n        throw new Error('Product not found');\n    }\n    return product;\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n    searchProducts,\n    getProductDetails\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9zZXJ2aWNlcy9tb2NrU2VydmljZS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsd0ZBQXdGO0FBQ3hGLDBDQUEwQztBQUUxQyxNQUFNQSxlQUFlO0lBQ25CO1FBQ0VDLElBQUk7UUFDSkMsT0FBTztRQUNQQyxPQUFPO1FBQ1BDLFVBQVU7UUFDVkMsYUFBYTtRQUNiQyxxQkFBcUI7UUFDckJDLEtBQUs7UUFDTEMsUUFBUTtJQUNWO0lBQ0E7UUFDRVAsSUFBSTtRQUNKQyxPQUFPO1FBQ1BDLE9BQU87UUFDUEMsVUFBVTtRQUNWQyxhQUFhO1FBQ2JDLHFCQUFxQjtRQUNyQkMsS0FBSztRQUNMQyxRQUFRO0lBQ1Y7SUFDQTtRQUNFUCxJQUFJO1FBQ0pDLE9BQU87UUFDUEMsT0FBTztRQUNQQyxVQUFVO1FBQ1ZDLGFBQWE7UUFDYkMscUJBQXFCO1FBQ3JCQyxLQUFLO1FBQ0xDLFFBQVE7SUFDVjtJQUNBO1FBQ0VQLElBQUk7UUFDSkMsT0FBTztRQUNQQyxPQUFPO1FBQ1BDLFVBQVU7UUFDVkMsYUFBYTtRQUNiQyxxQkFBcUI7UUFDckJDLEtBQUs7UUFDTEMsUUFBUTtJQUNWO0lBQ0E7UUFDRVAsSUFBSTtRQUNKQyxPQUFPO1FBQ1BDLE9BQU87UUFDUEMsVUFBVTtRQUNWQyxhQUFhO1FBQ2JDLHFCQUFxQjtRQUNyQkMsS0FBSztRQUNMQyxRQUFRO0lBQ1Y7SUFDQSxtQkFBbUI7SUFDbkI7UUFDRVAsSUFBSTtRQUNKQyxPQUFPO1FBQ1BDLE9BQU87UUFDUEMsVUFBVTtRQUNWQyxhQUFhO1FBQ2JDLHFCQUFxQjtRQUNyQkMsS0FBSztRQUNMQyxRQUFRO0lBQ1Y7SUFDQTtRQUNFUCxJQUFJO1FBQ0pDLE9BQU87UUFDUEMsT0FBTztRQUNQQyxVQUFVO1FBQ1ZDLGFBQWE7UUFDYkMscUJBQXFCO1FBQ3JCQyxLQUFLO1FBQ0xDLFFBQVE7SUFDVjtJQUNBO1FBQ0VQLElBQUk7UUFDSkMsT0FBTztRQUNQQyxPQUFPO1FBQ1BDLFVBQVU7UUFDVkMsYUFBYTtRQUNiQyxxQkFBcUI7UUFDckJDLEtBQUs7UUFDTEMsUUFBUTtJQUNWO0NBQ0Q7QUFFRCw2Q0FBNkM7QUFDN0MsTUFBTUMsaUJBQWlCLE9BQU9DO0lBQzVCQyxRQUFRQyxHQUFHLENBQUMsQ0FBQyw0QkFBNEIsRUFBRUYsT0FBTztJQUVsRCxxREFBcUQ7SUFDckQsSUFBSSxDQUFDQSxPQUFPLE9BQU9WO0lBRW5CLGlDQUFpQztJQUNqQyxNQUFNYSxpQkFBaUJILE1BQU1JLFdBQVc7SUFDeEMsTUFBTUMsbUJBQW1CZixhQUFhZ0IsTUFBTSxDQUFDQyxDQUFBQSxVQUMzQ0EsUUFBUWYsS0FBSyxDQUFDWSxXQUFXLEdBQUdJLFFBQVEsQ0FBQ0wsbUJBQ3JDSSxRQUFRWixXQUFXLENBQUNTLFdBQVcsR0FBR0ksUUFBUSxDQUFDTDtJQUc3Q0YsUUFBUUMsR0FBRyxDQUFDLENBQUMsbUJBQW1CLEVBQUVHLGlCQUFpQkksTUFBTSxDQUFDLHFCQUFxQixFQUFFVCxNQUFNLENBQUMsQ0FBQztJQUN6RixPQUFPSztBQUNUO0FBRUEsTUFBTUssb0JBQW9CLE9BQU9DO0lBQy9CLE1BQU1KLFVBQVVqQixhQUFhc0IsSUFBSSxDQUFDQyxDQUFBQSxJQUFLQSxFQUFFdEIsRUFBRSxLQUFLb0I7SUFDaEQsSUFBSSxDQUFDSixTQUFTO1FBQ1osTUFBTSxJQUFJTyxNQUFNO0lBQ2xCO0lBQ0EsT0FBT1A7QUFDVDtBQUVBLGlFQUFlO0lBQ2JSO0lBQ0FXO0FBQ0YsQ0FBQyxFQUFDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXDIwMDZ0XFxEb3dubG9hZHNcXEZpbmFsVGVzdFxcYmFja2VuZFxcc3JjXFxzZXJ2aWNlc1xcbW9ja1NlcnZpY2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhpcyBtb2NrIHNlcnZpY2UgcHJvdmlkZXMgZmFsbGJhY2sgcmVzdWx0cyB3aGVuIHNjcmFwaW5nIHJlYWwgZS1jb21tZXJjZSBzaXRlcyBmYWlsc1xyXG4vLyBJdCdzIHVzZWZ1bCBmb3IgdGVzdGluZyBhbmQgZGV2ZWxvcG1lbnRcclxuXHJcbmNvbnN0IG1vY2tQcm9kdWN0cyA9IFtcclxuICB7XHJcbiAgICBpZDogJzcxNDI3NycsXHJcbiAgICB0aXRsZTogJ0d1bmRhbSBNb2RlbCBLaXQgLSBSWC03OC0yJyxcclxuICAgIHByaWNlOiA0NS45OSxcclxuICAgIGltYWdlVXJsOiAnaHR0cHM6Ly9tLm1lZGlhLWFtYXpvbi5jb20vaW1hZ2VzL0kvNzFDOGR6U1pCWkwuX0FDX1VMMzIwXy5qcGcnLFxyXG4gICAgZGVzY3JpcHRpb246ICdDbGFzc2ljIEd1bmRhbSBtb2RlbCBraXQgd2l0aCBlY28tZnJpZW5kbHkgcGFja2FnaW5nJyxcclxuICAgIHN1c3RhaW5hYmlsaXR5TGV2ZWw6IDQsXHJcbiAgICB1cmw6ICdodHRwczovL2V4YW1wbGUuY29tL3Byb2R1Y3QvbW9jazEnLFxyXG4gICAgcmF0aW5nOiA0LjVcclxuICB9LFxyXG4gIHtcclxuICAgIGlkOiAnODM5MDQ0JyxcclxuICAgIHRpdGxlOiAnR3VuZGFtIFVuaWNvcm4gRGVzdHJveSBNb2RlJyxcclxuICAgIHByaWNlOiA2OC41MCxcclxuICAgIGltYWdlVXJsOiAnaHR0cHM6Ly9tLm1lZGlhLWFtYXpvbi5jb20vaW1hZ2VzL0kvNzFsTHI5bVlTNkwuX0FDX1VMMzIwXy5qcGcnLFxyXG4gICAgZGVzY3JpcHRpb246ICdBZHZhbmNlZCBtb2RlbCBraXQgd2l0aCBkZXRhaWxlZCBwYXJ0cycsXHJcbiAgICBzdXN0YWluYWJpbGl0eUxldmVsOiAzLFxyXG4gICAgdXJsOiAnaHR0cHM6Ly9leGFtcGxlLmNvbS9wcm9kdWN0L21vY2syJyxcclxuICAgIHJhdGluZzogNC4zXHJcbiAgfSxcclxuICB7XHJcbiAgICBpZDogJzk1MTM4MicsXHJcbiAgICB0aXRsZTogJ0d1bmRhbSBXaW5nIFplcm8gQ3VzdG9tJyxcclxuICAgIHByaWNlOiA1Mi43NSxcclxuICAgIGltYWdlVXJsOiAnaHR0cHM6Ly9tLm1lZGlhLWFtYXpvbi5jb20vaW1hZ2VzL0kvODFuajZJbFpiV0wuX0FDX1VMMzIwXy5qcGcnLFxyXG4gICAgZGVzY3JpcHRpb246ICdQb3B1bGFyIFdpbmcgR3VuZGFtIG1vZGVsIHdpdGggd2luZ3MgYW5kIHdlYXBvbnMnLFxyXG4gICAgc3VzdGFpbmFiaWxpdHlMZXZlbDogMyxcclxuICAgIHVybDogJ2h0dHBzOi8vZXhhbXBsZS5jb20vcHJvZHVjdC9tb2NrMycsXHJcbiAgICByYXRpbmc6IDQuN1xyXG4gIH0sXHJcbiAge1xyXG4gICAgaWQ6ICcyNDc2NTMnLFxyXG4gICAgdGl0bGU6ICdHdW5kYW0gQmFyYmF0b3MgTHVwdXMgUmV4JyxcclxuICAgIHByaWNlOiA2NC45OSxcclxuICAgIGltYWdlVXJsOiAnaHR0cHM6Ly9tLm1lZGlhLWFtYXpvbi5jb20vaW1hZ2VzL0kvNjFQMXhZQTRhckwuX0FDX1VMMzIwXy5qcGcnLFxyXG4gICAgZGVzY3JpcHRpb246ICdJcm9uLUJsb29kZWQgT3JwaGFucyBzZXJpZXMsIHdpdGggcmVjeWNsZWQgbWF0ZXJpYWxzJyxcclxuICAgIHN1c3RhaW5hYmlsaXR5TGV2ZWw6IDUsXHJcbiAgICB1cmw6ICdodHRwczovL2V4YW1wbGUuY29tL3Byb2R1Y3QvbW9jazQnLFxyXG4gICAgcmF0aW5nOiA0LjhcclxuICB9LFxyXG4gIHtcclxuICAgIGlkOiAnMzY1ODE5JyxcclxuICAgIHRpdGxlOiAnR3VuZGFtIEV4aWEgUmVwYWlyJyxcclxuICAgIHByaWNlOiAzOS45OSxcclxuICAgIGltYWdlVXJsOiAnaHR0cHM6Ly9tLm1lZGlhLWFtYXpvbi5jb20vaW1hZ2VzL0kvNzFnaEM1cHZHakwuX0FDX1VMMzIwXy5qcGcnLFxyXG4gICAgZGVzY3JpcHRpb246ICdQb3B1bGFyIDAwIEd1bmRhbSBtb2RlbCB3aXRoIEdOIHN3b3JkJyxcclxuICAgIHN1c3RhaW5hYmlsaXR5TGV2ZWw6IDIsXHJcbiAgICB1cmw6ICdodHRwczovL2V4YW1wbGUuY29tL3Byb2R1Y3QvbW9jazUnLFxyXG4gICAgcmF0aW5nOiA0LjJcclxuICB9LFxyXG4gIC8vIEJpY3ljbGUgcHJvZHVjdHNcclxuICB7XHJcbiAgICBpZDogJ2IxMDAxJyxcclxuICAgIHRpdGxlOiAnQmFtYm9vIEZyYW1lIEJpY3ljbGUnLFxyXG4gICAgcHJpY2U6IDY5OS45OSxcclxuICAgIGltYWdlVXJsOiAnaHR0cHM6Ly9tLm1lZGlhLWFtYXpvbi5jb20vaW1hZ2VzL0kvNzFSRENwWVI4RUwuX0FDX1NMMTUwMF8uanBnJyxcclxuICAgIGRlc2NyaXB0aW9uOiAnRWNvLWZyaWVuZGx5IGJpY3ljbGUgd2l0aCBiYW1ib28gZnJhbWUsIGhhbmRjcmFmdGVkIHVzaW5nIHN1c3RhaW5hYmxlIG1hdGVyaWFscycsXHJcbiAgICBzdXN0YWluYWJpbGl0eUxldmVsOiA1LFxyXG4gICAgdXJsOiAnaHR0cHM6Ly9leGFtcGxlLmNvbS9iYW1ib28tYmljeWNsZScsXHJcbiAgICByYXRpbmc6IDQuN1xyXG4gIH0sXHJcbiAge1xyXG4gICAgaWQ6ICdiMTAwMicsXHJcbiAgICB0aXRsZTogJ0VsZWN0cmljIENvbW11dGVyIEJpY3ljbGUnLFxyXG4gICAgcHJpY2U6IDEyOTkuOTksXHJcbiAgICBpbWFnZVVybDogJ2h0dHBzOi8vbS5tZWRpYS1hbWF6b24uY29tL2ltYWdlcy9JLzgxQ3JGUVpOLUlMLl9BQ19TTDE1MDBfLmpwZycsXHJcbiAgICBkZXNjcmlwdGlvbjogJ0VuZXJneS1lZmZpY2llbnQgZS1iaWtlIHdpdGggcmVjeWNsZWQgYWx1bWludW0gZnJhbWUgYW5kIHNvbGFyIGNoYXJnaW5nIGNhcGFiaWxpdHknLFxyXG4gICAgc3VzdGFpbmFiaWxpdHlMZXZlbDogNCxcclxuICAgIHVybDogJ2h0dHBzOi8vZXhhbXBsZS5jb20vZWxlY3RyaWMtYmljeWNsZScsXHJcbiAgICByYXRpbmc6IDQuOVxyXG4gIH0sXHJcbiAge1xyXG4gICAgaWQ6ICdiMTAwMycsXHJcbiAgICB0aXRsZTogJ1JlY3ljbGVkIFRpcmUgVXJiYW4gQmlrZScsXHJcbiAgICBwcmljZTogNTQ5LjUwLFxyXG4gICAgaW1hZ2VVcmw6ICdodHRwczovL20ubWVkaWEtYW1hem9uLmNvbS9pbWFnZXMvSS83MUhxUUhiLUNJTC5fQUNfU0wxNTAwXy5qcGcnLFxyXG4gICAgZGVzY3JpcHRpb246ICdDaXR5IGJpa2UgZmVhdHVyaW5nIHRpcmVzIG1hZGUgZnJvbSByZWN5Y2xlZCBydWJiZXIgYW5kIGVjby1mcmllbmRseSBjb21wb25lbnRzJyxcclxuICAgIHN1c3RhaW5hYmlsaXR5TGV2ZWw6IDUsXHJcbiAgICB1cmw6ICdodHRwczovL2V4YW1wbGUuY29tL3JlY3ljbGVkLWJpY3ljbGUnLFxyXG4gICAgcmF0aW5nOiA0LjVcclxuICB9XHJcbl07XHJcblxyXG4vLyBGaWx0ZXIgbW9jayBwcm9kdWN0cyBiYXNlZCBvbiBzZWFyY2ggcXVlcnlcclxuY29uc3Qgc2VhcmNoUHJvZHVjdHMgPSBhc3luYyAocXVlcnkpID0+IHtcclxuICBjb25zb2xlLmxvZyhgTW9jayBzZXJ2aWNlIHNlYXJjaGluZyBmb3I6ICR7cXVlcnl9YCk7XHJcblxyXG4gIC8vIElmIHNlYXJjaCBxdWVyeSBpcyBlbXB0eSwgcmV0dXJuIGFsbCBtb2NrIHByb2R1Y3RzXHJcbiAgaWYgKCFxdWVyeSkgcmV0dXJuIG1vY2tQcm9kdWN0cztcclxuXHJcbiAgLy8gRmlsdGVyIHByb2R1Y3RzIGJhc2VkIG9uIHF1ZXJ5XHJcbiAgY29uc3QgbG93ZXJDYXNlUXVlcnkgPSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xyXG4gIGNvbnN0IGZpbHRlcmVkUHJvZHVjdHMgPSBtb2NrUHJvZHVjdHMuZmlsdGVyKHByb2R1Y3QgPT4gXHJcbiAgICBwcm9kdWN0LnRpdGxlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobG93ZXJDYXNlUXVlcnkpIHx8IFxyXG4gICAgcHJvZHVjdC5kZXNjcmlwdGlvbi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGxvd2VyQ2FzZVF1ZXJ5KVxyXG4gICk7XHJcblxyXG4gIGNvbnNvbGUubG9nKGBNb2NrIHNlcnZpY2UgZm91bmQgJHtmaWx0ZXJlZFByb2R1Y3RzLmxlbmd0aH0gcHJvZHVjdHMgZm9yIHF1ZXJ5IFwiJHtxdWVyeX1cImApO1xyXG4gIHJldHVybiBmaWx0ZXJlZFByb2R1Y3RzO1xyXG59O1xyXG5cclxuY29uc3QgZ2V0UHJvZHVjdERldGFpbHMgPSBhc3luYyAocHJvZHVjdElkKSA9PiB7XHJcbiAgY29uc3QgcHJvZHVjdCA9IG1vY2tQcm9kdWN0cy5maW5kKHAgPT4gcC5pZCA9PT0gcHJvZHVjdElkKTtcclxuICBpZiAoIXByb2R1Y3QpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignUHJvZHVjdCBub3QgZm91bmQnKTtcclxuICB9XHJcbiAgcmV0dXJuIHByb2R1Y3Q7XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCB7XHJcbiAgc2VhcmNoUHJvZHVjdHMsXHJcbiAgZ2V0UHJvZHVjdERldGFpbHNcclxufTsgIl0sIm5hbWVzIjpbIm1vY2tQcm9kdWN0cyIsImlkIiwidGl0bGUiLCJwcmljZSIsImltYWdlVXJsIiwiZGVzY3JpcHRpb24iLCJzdXN0YWluYWJpbGl0eUxldmVsIiwidXJsIiwicmF0aW5nIiwic2VhcmNoUHJvZHVjdHMiLCJxdWVyeSIsImNvbnNvbGUiLCJsb2ciLCJsb3dlckNhc2VRdWVyeSIsInRvTG93ZXJDYXNlIiwiZmlsdGVyZWRQcm9kdWN0cyIsImZpbHRlciIsInByb2R1Y3QiLCJpbmNsdWRlcyIsImxlbmd0aCIsImdldFByb2R1Y3REZXRhaWxzIiwicHJvZHVjdElkIiwiZmluZCIsInAiLCJFcnJvciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./src/services/mockService.js\n");

/***/ }),

/***/ "(api-node)/./src/services/walmartService.js":
/*!****************************************!*\
  !*** ./src/services/walmartService.js ***!
  \****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ \"axios\");\n/* harmony import */ var cheerio__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! cheerio */ \"cheerio\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([axios__WEBPACK_IMPORTED_MODULE_0__, cheerio__WEBPACK_IMPORTED_MODULE_1__]);\n([axios__WEBPACK_IMPORTED_MODULE_0__, cheerio__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n// Helper function to calculate sustainability score\nconst calculateSustainabilityScore = (productData)=>{\n    // This would be more complex in a real application\n    let score = 2; // Default score - Walmart has some sustainability initiatives but generally scores lower\n    // Example logic - check for keywords in the title or description\n    const sustainabilityKeywords = [\n        'eco',\n        'sustainable',\n        'organic',\n        'recycled',\n        'green'\n    ];\n    for (const keyword of sustainabilityKeywords){\n        if (productData.title.toLowerCase().includes(keyword) || productData.description && productData.description.toLowerCase().includes(keyword)) {\n            score += 1;\n        }\n    }\n    return Math.min(5, score); // Cap at 5\n};\nconst searchProducts = async (query)=>{\n    try {\n        // Note: In a production environment, you would need to use official APIs instead of scraping\n        const response = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(`https://www.walmart.com/search?q=${encodeURIComponent(query)}`, {\n            headers: {\n                'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36'\n            },\n            // Lower max header size to prevent Header overflow errors\n            maxHeadersLength: 8192,\n            // Set timeout to prevent long waits\n            timeout: 8000\n        });\n        // Check if response data exists before parsing\n        if (!response || !response.data) {\n            console.log(\"No data received from Walmart\");\n            return [];\n        }\n        const $ = cheerio__WEBPACK_IMPORTED_MODULE_1__[\"default\"].load(response.data);\n        const products = [];\n        // This selector would need to be updated based on Walmart's current HTML structure\n        $('[data-item-id]').each((i, el)=>{\n            const id = $(el).attr('data-item-id');\n            if (!id) return;\n            const title = $(el).find('[data-automation-id=\"product-title\"]').text().trim();\n            const priceText = $(el).find('[data-automation-id=\"product-price\"]').text().trim();\n            const price = priceText ? parseFloat(priceText.replace(/[^0-9.]/g, '')) : null;\n            const imageUrl = $(el).find('img').attr('src');\n            const url = 'https://www.walmart.com/ip/' + id;\n            if (title && price) {\n                const productData = {\n                    id,\n                    title,\n                    price,\n                    imageUrl,\n                    url\n                };\n                products.push({\n                    ...productData,\n                    sustainabilityLevel: calculateSustainabilityScore(productData)\n                });\n            }\n        });\n        return products;\n    } catch (error) {\n        console.error('Error searching Walmart products:', error);\n        return [];\n    }\n};\nconst getProductDetails = async (productId)=>{\n    try {\n        const response = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(`https://www.walmart.com/ip/${productId}`, {\n            headers: {\n                'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36'\n            },\n            // Lower max header size to prevent Header overflow errors\n            maxHeadersLength: 8192,\n            // Set timeout to prevent long waits\n            timeout: 8000\n        });\n        // Check if response data exists before parsing\n        if (!response || !response.data) {\n            console.log(\"No data received from Walmart product details\");\n            throw new Error(\"Failed to load product data from Walmart\");\n        }\n        const $ = cheerio__WEBPACK_IMPORTED_MODULE_1__[\"default\"].load(response.data);\n        const title = $('[data-automation-id=\"product-title\"]').text().trim();\n        const priceText = $('[data-automation-id=\"product-price\"]').text().trim();\n        const price = priceText ? parseFloat(priceText.replace(/[^0-9.]/g, '')) : null;\n        // Get multiple images\n        const images = [];\n        $('[data-automation-id=\"image-gallery\"] img').each((i, el)=>{\n            const src = $(el).attr('src');\n            if (src) {\n                images.push(src);\n            }\n        });\n        // Extract description\n        const description = $('[data-automation-id=\"product-description\"]').text().trim();\n        // Extract specifications\n        const specs = {};\n        $('[data-automation-id=\"product-specifications\"] tr').each((i, el)=>{\n            const key = $(el).find('th').text().trim();\n            const value = $(el).find('td').text().trim();\n            if (key && value) {\n                specs[key] = value;\n            }\n        });\n        const productData = {\n            id: productId,\n            title,\n            price,\n            images: images.length > 0 ? images : [\n                $('[data-automation-id=\"image-gallery\"] img').first().attr('src')\n            ],\n            description,\n            specs,\n            url: `https://www.walmart.com/ip/${productId}`\n        };\n        return {\n            ...productData,\n            sustainabilityLevel: calculateSustainabilityScore(productData)\n        };\n    } catch (error) {\n        console.error('Error getting Walmart product details:', error);\n        throw error;\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n    searchProducts,\n    getProductDetails\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9zZXJ2aWNlcy93YWxtYXJ0U2VydmljZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBMEI7QUFDSTtBQUU5QixvREFBb0Q7QUFDcEQsTUFBTUUsK0JBQStCLENBQUNDO0lBQ3BDLG1EQUFtRDtJQUNuRCxJQUFJQyxRQUFRLEdBQUcseUZBQXlGO0lBRXhHLGlFQUFpRTtJQUNqRSxNQUFNQyx5QkFBeUI7UUFBQztRQUFPO1FBQWU7UUFBVztRQUFZO0tBQVE7SUFDckYsS0FBSyxNQUFNQyxXQUFXRCx1QkFBd0I7UUFDNUMsSUFBSUYsWUFBWUksS0FBSyxDQUFDQyxXQUFXLEdBQUdDLFFBQVEsQ0FBQ0gsWUFDeENILFlBQVlPLFdBQVcsSUFBSVAsWUFBWU8sV0FBVyxDQUFDRixXQUFXLEdBQUdDLFFBQVEsQ0FBQ0gsVUFBVztZQUN4RkYsU0FBUztRQUNYO0lBQ0Y7SUFFQSxPQUFPTyxLQUFLQyxHQUFHLENBQUMsR0FBR1IsUUFBUSxXQUFXO0FBQ3hDO0FBRUEsTUFBTVMsaUJBQWlCLE9BQU9DO0lBQzVCLElBQUk7UUFDRiw2RkFBNkY7UUFDN0YsTUFBTUMsV0FBVyxNQUFNZixpREFBUyxDQUFDLENBQUMsaUNBQWlDLEVBQUVpQixtQkFBbUJILFFBQVEsRUFBRTtZQUNoR0ksU0FBUztnQkFDUCxjQUFjO1lBQ2hCO1lBQ0EsMERBQTBEO1lBQzFEQyxrQkFBa0I7WUFDbEIsb0NBQW9DO1lBQ3BDQyxTQUFTO1FBQ1g7UUFFQSwrQ0FBK0M7UUFDL0MsSUFBSSxDQUFDTCxZQUFZLENBQUNBLFNBQVNNLElBQUksRUFBRTtZQUMvQkMsUUFBUUMsR0FBRyxDQUFDO1lBQ1osT0FBTyxFQUFFO1FBQ1g7UUFFQSxNQUFNQyxJQUFJdkIsb0RBQVksQ0FBQ2MsU0FBU00sSUFBSTtRQUNwQyxNQUFNSyxXQUFXLEVBQUU7UUFFbkIsbUZBQW1GO1FBQ25GRixFQUFFLGtCQUFrQkcsSUFBSSxDQUFDLENBQUNDLEdBQUdDO1lBQzNCLE1BQU1DLEtBQUtOLEVB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RDtJQUNGLEVBQUUsT0FBT3dDLE9BQU87UUFDZHJCLFFBQVFxQixLQUFLLENBQUMsMENBQTBDQTtRQUN4RCxNQUFNQTtJQUNSO0FBQ0Y7QUFFQSxpRUFBZTtJQUNiOUI7SUFDQStCO0FBQ0YsQ0FBQyxFQUFDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXDIwMDZ0XFxEb3dubG9hZHNcXEZpbmFsVGVzdFxcYmFja2VuZFxcc3JjXFxzZXJ2aWNlc1xcd2FsbWFydFNlcnZpY2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcbmltcG9ydCBjaGVlcmlvIGZyb20gJ2NoZWVyaW8nO1xuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gY2FsY3VsYXRlIHN1c3RhaW5hYmlsaXR5IHNjb3JlXG5jb25zdCBjYWxjdWxhdGVTdXN0YWluYWJpbGl0eVNjb3JlID0gKHByb2R1Y3REYXRhKSA9PiB7XG4gIC8vIFRoaXMgd291bGQgYmUgbW9yZSBjb21wbGV4IGluIGEgcmVhbCBhcHBsaWNhdGlvblxuICBsZXQgc2NvcmUgPSAyOyAvLyBEZWZhdWx0IHNjb3JlIC0gV2FsbWFydCBoYXMgc29tZSBzdXN0YWluYWJpbGl0eSBpbml0aWF0aXZlcyBidXQgZ2VuZXJhbGx5IHNjb3JlcyBsb3dlclxuICBcbiAgLy8gRXhhbXBsZSBsb2dpYyAtIGNoZWNrIGZvciBrZXl3b3JkcyBpbiB0aGUgdGl0bGUgb3IgZGVzY3JpcHRpb25cbiAgY29uc3Qgc3VzdGFpbmFiaWxpdHlLZXl3b3JkcyA9IFsnZWNvJywgJ3N1c3RhaW5hYmxlJywgJ29yZ2FuaWMnLCAncmVjeWNsZWQnLCAnZ3JlZW4nXTtcbiAgZm9yIChjb25zdCBrZXl3b3JkIG9mIHN1c3RhaW5hYmlsaXR5S2V5d29yZHMpIHtcbiAgICBpZiAocHJvZHVjdERhdGEudGl0bGUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhrZXl3b3JkKSB8fCBcbiAgICAgICAgKHByb2R1Y3REYXRhLmRlc2NyaXB0aW9uICYmIHByb2R1Y3REYXRhLmRlc2NyaXB0aW9uLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoa2V5d29yZCkpKSB7XG4gICAgICBzY29yZSArPSAxO1xuICAgIH1cbiAgfVxuICBcbiAgcmV0dXJuIE1hdGgubWluKDUsIHNjb3JlKTsgLy8gQ2FwIGF0IDVcbn07XG5cbmNvbnN0IHNlYXJjaFByb2R1Y3RzID0gYXN5bmMgKHF1ZXJ5KSA9PiB7XG4gIHRyeSB7XG4gICAgLy8gTm90ZTogSW4gYSBwcm9kdWN0aW9uIGVudmlyb25tZW50LCB5b3Ugd291bGQgbmVlZCB0byB1c2Ugb2ZmaWNpYWwgQVBJcyBpbnN0ZWFkIG9mIHNjcmFwaW5nXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoYGh0dHBzOi8vd3d3LndhbG1hcnQuY29tL3NlYXJjaD9xPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHF1ZXJ5KX1gLCB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdVc2VyLUFnZW50JzogJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS85MS4wLjQ0NzIuMTI0IFNhZmFyaS81MzcuMzYnXG4gICAgICB9LFxuICAgICAgLy8gTG93ZXIgbWF4IGhlYWRlciBzaXplIHRvIHByZXZlbnQgSGVhZGVyIG92ZXJmbG93IGVycm9yc1xuICAgICAgbWF4SGVhZGVyc0xlbmd0aDogODE5MixcbiAgICAgIC8vIFNldCB0aW1lb3V0IHRvIHByZXZlbnQgbG9uZyB3YWl0c1xuICAgICAgdGltZW91dDogODAwMFxuICAgIH0pO1xuICAgIFxuICAgIC8vIENoZWNrIGlmIHJlc3BvbnNlIGRhdGEgZXhpc3RzIGJlZm9yZSBwYXJzaW5nXG4gICAgaWYgKCFyZXNwb25zZSB8fCAhcmVzcG9uc2UuZGF0YSkge1xuICAgICAgY29uc29sZS5sb2coXCJObyBkYXRhIHJlY2VpdmVkIGZyb20gV2FsbWFydFwiKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgJCA9IGNoZWVyaW8ubG9hZChyZXNwb25zZS5kYXRhKTtcbiAgICBjb25zdCBwcm9kdWN0cyA9IFtdO1xuICAgIFxuICAgIC8vIFRoaXMgc2VsZWN0b3Igd291bGQgbmVlZCB0byBiZSB1cGRhdGVkIGJhc2VkIG9uIFdhbG1hcnQncyBjdXJyZW50IEhUTUwgc3RydWN0dXJlXG4gICAgJCgnW2RhdGEtaXRlbS1pZF0nKS5lYWNoKChpLCBlbCkgPT4ge1xuICAgICAgY29uc3QgaWQgPSAkKGVsKS5hdHRyKCdkYXRhLWl0ZW0taWQnKTtcbiAgICAgIGlmICghaWQpIHJldHVybjtcbiAgICAgIFxuICAgICAgY29uc3QgdGl0bGUgPSAkKGVsKS5maW5kKCdbZGF0YS1hdXRvbWF0aW9uLWlkPVwicHJvZHVjdC10aXRsZVwiXScpLnRleHQoKS50cmltKCk7XG4gICAgICBjb25zdCBwcmljZVRleHQgPSAkKGVsKS5maW5kKCdbZGF0YS1hdXRvbWF0aW9uLWlkPVwicHJvZHVjdC1wcmljZVwiXScpLnRleHQoKS50cmltKCk7XG4gICAgICBjb25zdCBwcmljZSA9IHByaWNlVGV4dCA/IHBhcnNlRmxvYXQocHJpY2VUZXh0LnJlcGxhY2UoL1teMC05Ll0vZywgJycpKSA6IG51bGw7XG4gICAgICBjb25zdCBpbWFnZVVybCA9ICQoZWwpLmZpbmQoJ2ltZycpLmF0dHIoJ3NyYycpO1xuICAgICAgY29uc3QgdXJsID0gJ2h0dHBzOi8vd3d3LndhbG1hcnQuY29tL2lwLycgKyBpZDtcbiAgICAgIFxuICAgICAgaWYgKHRpdGxlICYmIHByaWNlKSB7XG4gICAgICAgIGNvbnN0IHByb2R1Y3REYXRhID0geyBpZCwgdGl0bGUsIHByaWNlLCBpbWFnZVVybCwgdXJsIH07XG4gICAgICAgIHByb2R1Y3RzLnB1c2goe1xuICAgICAgICAgIC4uLnByb2R1Y3REYXRhLFxuICAgICAgICAgIHN1c3RhaW5hYmlsaXR5TGV2ZWw6IGNhbGN1bGF0ZVN1c3RhaW5hYmlsaXR5U2NvcmUocHJvZHVjdERhdGEpXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiBwcm9kdWN0cztcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZWFyY2hpbmcgV2FsbWFydCBwcm9kdWN0czonLCBlcnJvcik7XG4gICAgcmV0dXJuIFtdO1xuICB9XG59O1xuXG5jb25zdCBnZXRQcm9kdWN0RGV0YWlscyA9IGFzeW5jIChwcm9kdWN0SWQpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldChgaHR0cHM6Ly93d3cud2FsbWFydC5jb20vaXAvJHtwcm9kdWN0SWR9YCwge1xuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnVXNlci1BZ2VudCc6ICdNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvOTEuMC40NDcyLjEyNCBTYWZhcmkvNTM3LjM2J1xuICAgICAgfSxcbiAgICAgIC8vIExvd2VyIG1heCBoZWFkZXIgc2l6ZSB0byBwcmV2ZW50IEhlYWRlciBvdmVyZmxvdyBlcnJvcnNcbiAgICAgIG1heEhlYWRlcnNMZW5ndGg6IDgxOTIsXG4gICAgICAvLyBTZXQgdGltZW91dCB0byBwcmV2ZW50IGxvbmcgd2FpdHNcbiAgICAgIHRpbWVvdXQ6IDgwMDBcbiAgICB9KTtcbiAgICBcbiAgICAvLyBDaGVjayBpZiByZXNwb25zZSBkYXRhIGV4aXN0cyBiZWZvcmUgcGFyc2luZ1xuICAgIGlmICghcmVzcG9uc2UgfHwgIXJlc3BvbnNlLmRhdGEpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiTm8gZGF0YSByZWNlaXZlZCBmcm9tIFdhbG1hcnQgcHJvZHVjdCBkZXRhaWxzXCIpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGxvYWQgcHJvZHVjdCBkYXRhIGZyb20gV2FsbWFydFwiKTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgJCA9IGNoZWVyaW8ubG9hZChyZXNwb25zZS5kYXRhKTtcbiAgICBcbiAgICBjb25zdCB0aXRsZSA9ICQoJ1tkYXRhLWF1dG9tYXRpb24taWQ9XCJwcm9kdWN0LXRpdGxlXCJdJykudGV4dCgpLnRyaW0oKTtcbiAgICBjb25zdCBwcmljZVRleHQgPSAkKCdbZGF0YS1hdXRvbWF0aW9uLWlkPVwicHJvZHVjdC1wcmljZVwiXScpLnRleHQoKS50cmltKCk7XG4gICAgY29uc3QgcHJpY2UgPSBwcmljZVRleHQgPyBwYXJzZUZsb2F0KHByaWNlVGV4dC5yZXBsYWNlKC9bXjAtOS5dL2csICcnKSkgOiBudWxsO1xuICAgIFxuICAgIC8vIEdldCBtdWx0aXBsZSBpbWFnZXNcbiAgICBjb25zdCBpbWFnZXMgPSBbXTtcbiAgICAkKCdbZGF0YS1hdXRvbWF0aW9uLWlkPVwiaW1hZ2UtZ2FsbGVyeVwiXSBpbWcnKS5lYWNoKChpLCBlbCkgPT4ge1xuICAgICAgY29uc3Qgc3JjID0gJChlbCkuYXR0cignc3JjJyk7XG4gICAgICBpZiAoc3JjKSB7XG4gICAgICAgIGltYWdlcy5wdXNoKHNyYyk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgLy8gRXh0cmFjdCBkZXNjcmlwdGlvblxuICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gJCgnW2RhdGEtYXV0b21hdGlvbi1pZD1cInByb2R1Y3QtZGVzY3JpcHRpb25cIl0nKS50ZXh0KCkudHJpbSgpO1xuICAgIFxuICAgIC8vIEV4dHJhY3Qgc3BlY2lmaWNhdGlvbnNcbiAgICBjb25zdCBzcGVjcyA9IHt9O1xuICAgICQoJ1tkYXRhLWF1dG9tYXRpb24taWQ9XCJwcm9kdWN0LXNwZWNpZmljYXRpb25zXCJdIHRyJykuZWFjaCgoaSwgZWwpID0+IHtcbiAgICAgIGNvbnN0IGtleSA9ICQoZWwpLmZpbmQoJ3RoJykudGV4dCgpLnRyaW0oKTtcbiAgICAgIGNvbnN0IHZhbHVlID0gJChlbCkuZmluZCgndGQnKS50ZXh0KCkudHJpbSgpO1xuICAgICAgaWYgKGtleSAmJiB2YWx1ZSkge1xuICAgICAgICBzcGVjc1trZXldID0gdmFsdWU7XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgY29uc3QgcHJvZHVjdERhdGEgPSB7XG4gICAgICBpZDogcHJvZHVjdElkLFxuICAgICAgdGl0bGUsXG4gICAgICBwcmljZSxcbiAgICAgIGltYWdlczogaW1hZ2VzLmxlbmd0aCA+IDAgPyBpbWFnZXMgOiBbJCgnW2RhdGEtYXV0b21hdGlvbi1pZD1cImltYWdlLWdhbGxlcnlcIl0gaW1nJykuZmlyc3QoKS5hdHRyKCdzcmMnKV0sXG4gICAgICBkZXNjcmlwdGlvbixcbiAgICAgIHNwZWNzLFxuICAgICAgdXJsOiBgaHR0cHM6Ly93d3cud2FsbWFydC5jb20vaXAvJHtwcm9kdWN0SWR9YFxuICAgIH07XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnByb2R1Y3REYXRhLFxuICAgICAgc3VzdGFpbmFiaWxpdHlMZXZlbDogY2FsY3VsYXRlU3VzdGFpbmFiaWxpdHlTY29yZShwcm9kdWN0RGF0YSlcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgV2FsbWFydCBwcm9kdWN0IGRldGFpbHM6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIHNlYXJjaFByb2R1Y3RzLFxuICBnZXRQcm9kdWN0RGV0YWlsc1xufTsiXSwibmFtZXMiOlsiYXhpb3MiLCJjaGVlcmlvIiwiY2FsY3VsYXRlU3VzdGFpbmFiaWxpdHlTY29yZSIsInByb2R1Y3REYXRhIiwic2NvcmUiLCJzdXN0YWluYWJpbGl0eUtleXdvcmRzIiwia2V5d29yZCIsInRpdGxlIiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsImRlc2NyaXB0aW9uIiwiTWF0aCIsIm1pbiIsInNlYXJjaFByb2R1Y3RzIiwicXVlcnkiLCJyZXNwb25zZSIsImdldCIsImVuY29kZVVSSUNvbXBvbmVudCIsImhlYWRlcnMiLCJtYXhIZWFkZXJzTGVuZ3RoIiwidGltZW91dCIsImRhdGEiLCJjb25zb2xlIiwibG9nIiwiJCIsImxvYWQiLCJwcm9kdWN0cyIsImVhY2giLCJpIiwiZWwiLCJpZCIsImF0dHIiLCJmaW5kIiwidGV4dCIsInRyaW0iLCJwcmljZVRleHQiLCJwcmljZSIsInBhcnNlRmxvYXQiLCJyZXBsYWNlIiwiaW1hZ2VVcmwiLCJ1cmwiLCJwdXNoIiwic3VzdGFpbmFiaWxpdHlMZXZlbCIsImVycm9yIiwiZ2V0UHJvZHVjdERldGFpbHMiLCJwcm9kdWN0SWQiLCJFcnJvciIsImltYWdlcyIsInNyYyIsInNwZWNzIiwia2V5IiwidmFsdWUiLCJsZW5ndGgiLCJmaXJzdCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./src/services/walmartService.js\n");

/***/ }),

/***/ "axios":
/*!************************!*\
  !*** external "axios" ***!
  \************************/
/***/ ((module) => {

module.exports = import("axios");;

/***/ }),

/***/ "cheerio":
/*!**************************!*\
  !*** external "cheerio" ***!
  \**************************/
/***/ ((module) => {

module.exports = import("cheerio");;

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fproducts%2Fsearch&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cproducts%5Csearch.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();